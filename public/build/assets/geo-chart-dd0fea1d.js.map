{"version":3,"mappings":"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","names":["Input","React","props","ref","children","inputProps","wrapperProps","className","autoFocus","style","onClick","jsx","clsx","FocusScope","getDefaultGranularity","date","CalendarDate","dateIsInvalid","min","max","toSafeZoned","timeZone","disambiguation","toZoned","useBaseDatePickerState","selectedDate","userTimezone","useUserTimezone","timezone","calendarIsOpen","setCalendarIsOpen","useState","closeDialogOnSelection","granularity","DateRangeIcon","createSvgIcon","CalendarCell","currentMonth","dayIsActive","dayIsHighlighted","dayIsRangeStart","dayIsRangeEnd","getCellProps","localeCode","useSelectedLocale","dayOfWeek","getDayOfWeek","isActive","isHighlighted","isRangeStart","isRangeEnd","dayIsToday","isToday","sameMonth","isSameMonth","isDisabled","jsxs","CalendarMonth","startDate","state","isFirst","isLast","weeksInMonth","getWeeksInMonth","monthStart","startOfWeek","CalendarMonthHeader","WeekdayHeader","weekIndex","m","dayIndex","calendarDates","setCalendarDates","shiftCalendars","direction","count","newDates","endOfMonth","monthFormatter","useDateFormatter","isBackwardDisabled","isForwardDisabled","startOfMonth","IconButton","KeyboardArrowLeftIcon","KeyboardArrowRightIcon","dayFormatter","index","dateDay","weekday","Calendar","visibleMonths","useIsMobileMediaQuery","Fragment","toCalendarDate","DatePickerField","inputRef","onBlur","other","fieldClassNames","getInputFieldClassNames","objRef","useObjectRef","fieldProps","useField","Field","mergeProps","e","_a","focusManager","createFocusManager","adjustSegment","value","part","amount","options","hours","isPM","setSegment","segmentValue","wasPM","PAGE_STEP","EditableDateSegment","segment","domProps","onChange","isPlaceholder","isMobile","enteredKeys","useRef","useFocusManager","formatter","parser","useMemo","NumberParser","setSegmentValue","newValue","adjustSegmentValue","backspace","parsed","now","today","onKeyDown","onInput","amPmFormatter","am","amDate","pm","pmDate","key","numberValue","allowsZero","shouldSetValue","spinButtonProps","LiteralDateSegment","getSegmentLimits","type","getMinimumMonthInYear","getMinimumDayInMonth","DateSegmentList","segmentProps","memoOptions","dateValue","segments","limits","textValue","startOfDay","endOfDay","Now","getCurrentDateTime","locale","_b","getBootstrapData","DateRangePresets","message","endOfWeek","start","startOfYear","endOfYear","useDateRangePickerState","useCurrentDateTime","setIsPlaceholder","setStateValue","internalValue","setInternalValue","useControlledState","completeRange","clear","useCallback","anchorDate","setAnchorDate","isHighlighting","setIsHighlighting","highlightedRange","setHighlightedRange","rangeToCalendarDates","constrainRange","range","end","maxDate","startMax","minDate","endMin","setSelectedValue","newRange","day","isSameDay","makeRange","finalRange","FormattedDateTimeRange","memo","preset","propsTimezone","dates","useSettings","DateFormatPresets","castToDate","shallowEqual","parseAbsolute","ArrowRightAltIcon","DatePresetList","onPresetSelected","selectedValue","List","ListItem","Trans","DateRangeComparePresets","diffInMinutes","DateRangeComparePresetList","originalRangeValue","DateRangeDialog","compareState","showInlineDatePickerField","compareVisibleDefault","isTablet","useIsTabletMediaQuery","close","useDialogContext","initialStateRef","hasPlaceholder","compareVisible","setCompareVisible","footer","DialogFooter","Button","Dialog","DialogBody","Switch","AnimatePresence","Calendars","InlineDatePickerField","label","monthDayFormat","ReportDateSelector","disabled","compactOnMobile","enableCompare","DialogTrigger","DateSelectorDialog","compareHasInitialValue","ChartLayout","title","description","contentIsFlex","contentClassName","contentRef","ChartLoadingIndicator","ProgressCircle","LazyChart","lazy","BaseChart","rowSpan","colSpan","isLoading","Suspense","formatReportData","report","shareFirstDatasetLabels","firstDatasetLabels","dataset","datasetIndex","data","datasetItem","itemIndex","generateDatasetLabels","datum","generateTimeLabels","isoDate","isoEndDate","parseAbsoluteToLocal","endDate","getFormatter","memoize","DateFormatter","a","b","primaryColor","ChartColors","LineChartOptions","LineChart","formattedData","PolarAreaChartOptions","PolarAreaChart","d","i","c","loaderUrl","useGoogleGeoChart","placeholderRef","country","onCountrySelected","trans","useTrans","analytics","apiKey","selectedTheme","useThemeSelector","geoChartRef","regionInteractivity","drawGoogleChart","seedData","location","backgroundColor","themeValueToHex","initGoogleGeoChart","lazyLoader","useEffect","ArrowBackIcon","InfoDialogTriggerIcon","InfoDialogTrigger","body","dialogSize","DialogHeader","FormattedCountryName","countryCode","regionNames","formattedName","GeoChart","metricData","layoutProps","initialData","InfoTrigger"],"sources":["../../../common/foundation/resources/client/ui/library/forms/input-field/input.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/utils.ts","../../../common/foundation/resources/client/ui/library/i18n/to-safe-zoned.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/use-base-date-picker-state.ts","../../../common/foundation/resources/client/ui/library/icons/material/DateRange.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/calendar/calendar-cell.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/calendar/calendar-month.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/calendar/calendar.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/date-picker-field.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/utils/adjust-segment.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/utils/set-segment.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/utils/page-step.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/editable-date-segment.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/literal-segment.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/utils/get-segment-limits.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/segments/date-segment-list.tsx","../../../common/foundation/resources/client/ui/library/utils/date/start-of-day.ts","../../../common/foundation/resources/client/ui/library/utils/date/end-of-day.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-presets.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/use-date-range-picker-state.ts","../../../common/foundation/resources/client/ui/library/i18n/formatted-date-time-range.tsx","../../../common/foundation/resources/client/ui/library/icons/material/ArrowRightAlt.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-preset-list.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-compare-preset-list.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-dialog.tsx","../../../common/foundation/resources/client/admin/analytics/report-date-selector.tsx","../../../common/foundation/resources/client/charts/chart-layout.tsx","../../../common/foundation/resources/client/charts/chart-loading-indicator.tsx","../../../common/foundation/resources/client/charts/base-chart.tsx","../../../common/foundation/resources/client/charts/data/format-report-data.ts","../../../common/foundation/resources/client/charts/chart-colors.tsx","../../../common/foundation/resources/client/charts/line-chart.tsx","../../../common/foundation/resources/client/charts/polar-area-chart.tsx","../../../common/foundation/resources/client/admin/analytics/geo-chart/use-google-geo-chart.ts","../../../common/foundation/resources/client/ui/library/icons/material/ArrowBack.tsx","../../../common/foundation/resources/client/ui/library/overlays/dialog/info-dialog-trigger/info-dialog-trigger-icon.tsx","../../../common/foundation/resources/client/ui/library/overlays/dialog/info-dialog-trigger/info-dialog-trigger.tsx","../../../common/foundation/resources/client/ui/library/i18n/formatted-country-name.tsx","../../../common/foundation/resources/client/admin/analytics/geo-chart/geo-chart.tsx"],"sourcesContent":["import {FocusScope} from '@react-aria/focus';\nimport React, {ComponentPropsWithoutRef, CSSProperties, ReactNode} from 'react';\nimport clsx from 'clsx';\n\ninterface InputProps {\n  className?: string;\n  children: ReactNode;\n  autoFocus?: boolean;\n  disabled?: boolean;\n  style?: CSSProperties;\n  inputProps?: ComponentPropsWithoutRef<'div'>;\n  wrapperProps?: ComponentPropsWithoutRef<'div'>;\n  onClick?: React.MouseEventHandler<HTMLDivElement>;\n}\n\nexport const Input = React.forwardRef<HTMLDivElement, InputProps>(\n  (props, ref) => {\n    const {\n      children,\n      inputProps,\n      wrapperProps,\n      className,\n      autoFocus,\n      style,\n      onClick,\n    } = props;\n\n    return (\n      <div {...wrapperProps} onClick={onClick}>\n        <div\n          {...inputProps}\n          role=\"group\"\n          className={clsx(\n            className,\n            'flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60'\n          )}\n          ref={ref}\n          style={style}\n        >\n          <FocusScope autoFocus={autoFocus}>{children}</FocusScope>\n        </div>\n      </div>\n    );\n  }\n);\n","import {CalendarDate, DateValue} from '@internationalized/date';\n\nexport function getDefaultGranularity(date: DateValue) {\n  if (date instanceof CalendarDate) {\n    return 'day';\n  }\n  return 'minute';\n}\n\nexport function dateIsInvalid(\n  date: CalendarDate,\n  min?: DateValue,\n  max?: DateValue\n) {\n  return (\n    (min != null && date.compare(min) < 0) ||\n    (max != null && date.compare(max) > 0)\n  );\n}\n","import {\n  CalendarDate,\n  CalendarDateTime,\n  Disambiguation,\n  toZoned,\n  ZonedDateTime,\n} from '@internationalized/date';\n\nexport function toSafeZoned(\n  date: CalendarDate | CalendarDateTime | ZonedDateTime,\n  timeZone: string,\n  disambiguation?: Disambiguation,\n): ZonedDateTime {\n  try {\n    return toZoned(date, timeZone, disambiguation);\n  } catch (e) {\n    return toZoned(date, 'UTC', disambiguation);\n  }\n}\n","import {useState} from 'react';\nimport {DateValue, ZonedDateTime} from '@internationalized/date';\nimport {getDefaultGranularity} from './utils';\nimport type {DatePickerValueProps} from './date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-picker/date-range-value';\nimport {useUserTimezone} from '@ui/i18n/use-user-timezone';\nimport {toSafeZoned} from '@ui/i18n/to-safe-zoned';\n\nexport function useBaseDatePickerState(\n  selectedDate: DateValue,\n  props:\n    | DatePickerValueProps<ZonedDateTime>\n    | DatePickerValueProps<Partial<DateRangeValue>, DateRangeValue>,\n) {\n  const userTimezone = useUserTimezone();\n  const timezone = props.timezone ?? userTimezone;\n  const [calendarIsOpen, setCalendarIsOpen] = useState(false);\n  const closeDialogOnSelection = props.closeDialogOnSelection ?? true;\n\n  const granularity = props.granularity || getDefaultGranularity(selectedDate);\n  const min = props.min ? toSafeZoned(props.min, timezone) : undefined;\n  const max = props.max ? toSafeZoned(props.max, timezone) : undefined;\n\n  return {\n    timezone,\n    granularity,\n    min,\n    max,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  };\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DateRangeIcon = createSvgIcon(\n  <path d=\"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z\" />\n, 'DateRangeOutlined');\n","import React from 'react';\nimport clsx from 'clsx';\nimport {\n  CalendarDate,\n  DateValue,\n  getDayOfWeek,\n  isSameMonth,\n  isToday,\n} from '@internationalized/date';\nimport {useSelectedLocale} from '@ui/i18n/selected-locale';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {dateIsInvalid} from '../utils';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface CalendarCellProps {\n  date: CalendarDate;\n  currentMonth: DateValue;\n  state: DatePickerState | DateRangePickerState;\n}\nexport function CalendarCell({\n  date,\n  currentMonth,\n  state: {\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    timezone,\n    min,\n    max,\n  },\n}: CalendarCellProps) {\n  const {localeCode} = useSelectedLocale();\n  const dayOfWeek = getDayOfWeek(date, localeCode);\n  const isActive = dayIsActive(date);\n  const isHighlighted = dayIsHighlighted(date);\n  const isRangeStart = dayIsRangeStart(date);\n  const isRangeEnd = dayIsRangeEnd(date);\n  const dayIsToday = isToday(date, timezone);\n  const sameMonth = isSameMonth(date, currentMonth);\n  const isDisabled = dateIsInvalid(date, min, max);\n\n  return (\n    <div\n      role=\"button\"\n      aria-disabled={isDisabled}\n      className={clsx(\n        'relative isolate h-40 w-40 flex-shrink-0 text-sm',\n        isDisabled && 'pointer-events-none text-disabled',\n        !sameMonth && 'pointer-events-none invisible',\n      )}\n      {...getCellProps(date, sameMonth)}\n    >\n      <span\n        className={clsx(\n          'absolute inset-0 z-10 flex h-full w-full cursor-pointer select-none items-center justify-center rounded-full',\n          !isActive && !dayIsToday && 'hover:bg-hover',\n          isActive && 'bg-primary font-semibold text-on-primary',\n          dayIsToday && !isActive && 'bg-chip',\n        )}\n      >\n        {date.day}\n      </span>\n      {isHighlighted && sameMonth && (\n        <span\n          className={clsx(\n            'absolute inset-0 h-full w-full bg-primary/focus',\n            (isRangeStart || dayOfWeek === 0 || date.day === 1) &&\n              'rounded-l-full',\n            (isRangeEnd ||\n              dayOfWeek === 6 ||\n              date.day ===\n                currentMonth.calendar.getDaysInMonth(currentMonth)) &&\n              'rounded-r-full',\n          )}\n        />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport {m} from 'framer-motion';\nimport {\n  CalendarDate,\n  endOfMonth,\n  getWeeksInMonth,\n  startOfMonth,\n  startOfWeek,\n} from '@internationalized/date';\nimport {KeyboardArrowLeftIcon} from '@ui/icons/material/KeyboardArrowLeft';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {KeyboardArrowRightIcon} from '@ui/icons/material/KeyboardArrowRight';\nimport {CalendarCell} from './calendar-cell';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {useDateFormatter} from '@ui/i18n/use-date-formatter';\nimport {useSelectedLocale} from '@ui/i18n/selected-locale';\nimport {dateIsInvalid} from '../utils';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\nexport interface CalendarMonthProps {\n  state: DatePickerState | DateRangePickerState;\n  startDate: CalendarDate;\n  isFirst: boolean;\n  isLast: boolean;\n}\nexport function CalendarMonth({\n  startDate,\n  state,\n  isFirst,\n  isLast,\n}: CalendarMonthProps) {\n  const {localeCode} = useSelectedLocale();\n  const weeksInMonth = getWeeksInMonth(startDate, localeCode);\n  const monthStart = startOfWeek(startDate, localeCode);\n\n  return (\n    <div className=\"w-280 flex-shrink-0\">\n      <CalendarMonthHeader\n        isFirst={isFirst}\n        isLast={isLast}\n        state={state}\n        currentMonth={startDate}\n      />\n      <div className=\"block\" role=\"grid\">\n        <WeekdayHeader state={state} startDate={startDate} />\n        {[...new Array(weeksInMonth).keys()].map(weekIndex => (\n          <m.div className=\"mb-6 flex\" key={weekIndex}>\n            {[...new Array(7).keys()].map(dayIndex => (\n              <CalendarCell\n                key={dayIndex}\n                date={monthStart.add({weeks: weekIndex, days: dayIndex})}\n                currentMonth={startDate}\n                state={state}\n              />\n            ))}\n          </m.div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface CalendarMonthHeaderProps {\n  state: DatePickerState | DateRangePickerState;\n  currentMonth: CalendarDate;\n  isFirst: boolean;\n  isLast: boolean;\n}\nfunction CalendarMonthHeader({\n  currentMonth,\n  isFirst,\n  isLast,\n  state: {calendarDates, setCalendarDates, timezone, min, max},\n}: CalendarMonthHeaderProps) {\n  const shiftCalendars = (direction: 'forward' | 'backward') => {\n    const count = calendarDates.length;\n    let newDates: CalendarDate[];\n    if (direction === 'forward') {\n      newDates = calendarDates.map(date =>\n        endOfMonth(date.add({months: count})),\n      );\n    } else {\n      newDates = calendarDates.map(date =>\n        endOfMonth(date.subtract({months: count})),\n      );\n    }\n    setCalendarDates(newDates);\n  };\n\n  const monthFormatter = useDateFormatter({\n    month: 'long',\n    year: 'numeric',\n    era: currentMonth.calendar.identifier !== 'gregory' ? 'long' : undefined,\n    calendar: currentMonth.calendar.identifier,\n  });\n\n  const isBackwardDisabled = dateIsInvalid(\n    currentMonth.subtract({days: 1}),\n    min,\n    max,\n  );\n  const isForwardDisabled = dateIsInvalid(\n    startOfMonth(currentMonth.add({months: 1})),\n    min,\n    max,\n  );\n\n  return (\n    <div className=\"flex items-center justify-between gap-10\">\n      <IconButton\n        size=\"md\"\n        className={clsx('text-muted', !isFirst && 'invisible')}\n        disabled={!isFirst || isBackwardDisabled}\n        aria-hidden={!isFirst}\n        onClick={() => {\n          shiftCalendars('backward');\n        }}\n      >\n        <KeyboardArrowLeftIcon />\n      </IconButton>\n      <div className=\"select-none text-sm font-semibold\">\n        {monthFormatter.format(currentMonth.toDate(timezone))}\n      </div>\n      <IconButton\n        size=\"md\"\n        className={clsx('text-muted', !isLast && 'invisible')}\n        disabled={!isLast || isForwardDisabled}\n        aria-hidden={!isLast}\n        onClick={() => {\n          shiftCalendars('forward');\n        }}\n      >\n        <KeyboardArrowRightIcon />\n      </IconButton>\n    </div>\n  );\n}\n\ninterface WeekdayHeaderProps {\n  state: DatePickerState | DateRangePickerState;\n  startDate: CalendarDate;\n}\nfunction WeekdayHeader({state: {timezone}, startDate}: WeekdayHeaderProps) {\n  const {localeCode} = useSelectedLocale();\n  const dayFormatter = useDateFormatter({weekday: 'short'});\n\n  const monthStart = startOfWeek(startDate, localeCode);\n\n  return (\n    <div className=\"flex\">\n      {[...new Array(7).keys()].map(index => {\n        const date = monthStart.add({days: index});\n        const dateDay = date.toDate(timezone);\n        const weekday = dayFormatter.format(dateDay);\n        return (\n          <div\n            className=\"relative h-40 w-40 flex-shrink-0 text-sm font-semibold\"\n            key={index}\n          >\n            <div className=\"absolute flex h-full w-full select-none items-center justify-center\">\n              {weekday}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import React, {Fragment} from 'react';\nimport {startOfMonth, toCalendarDate} from '@internationalized/date';\nimport {useIsMobileMediaQuery} from '@ui/utils/hooks/is-mobile-media-query';\nimport {CalendarMonth} from './calendar-month';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface CalendarProps {\n  state: DatePickerState | DateRangePickerState;\n  visibleMonths?: 1 | 2;\n}\nexport function Calendar({state, visibleMonths = 1}: CalendarProps) {\n  const isMobile = useIsMobileMediaQuery();\n\n  if (isMobile) {\n    visibleMonths = 1;\n  }\n\n  return (\n    <Fragment>\n      {[...new Array(visibleMonths).keys()].map(index => {\n        const startDate = toCalendarDate(\n          startOfMonth(state.calendarDates[index])\n        );\n        const isFirst = index === 0;\n        const isLast = index === visibleMonths - 1;\n        return (\n          <CalendarMonth\n            key={index}\n            state={state}\n            startDate={startDate}\n            isFirst={isFirst}\n            isLast={isLast}\n          />\n        );\n      })}\n    </Fragment>\n  );\n}\n","import React, {ComponentPropsWithoutRef, FocusEventHandler, Ref} from 'react';\nimport clsx from 'clsx';\nimport {createFocusManager} from '@react-aria/focus';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {getInputFieldClassNames} from '../../get-input-field-class-names';\nimport {Field, FieldProps} from '../../field';\nimport {Input} from '../../input';\nimport {useField} from '../../use-field';\n\nexport interface DatePickerFieldProps\n  extends Omit<FieldProps, 'fieldClassNames'> {\n  inputRef?: Ref<HTMLDivElement>;\n  onBlur?: FocusEventHandler;\n  showCalendarFooter?: boolean;\n}\nexport const DatePickerField = React.forwardRef<\n  HTMLDivElement,\n  DatePickerFieldProps\n>(({inputRef, wrapperProps, children, onBlur, ...other}, ref) => {\n  const fieldClassNames = getInputFieldClassNames(other);\n  const objRef = useObjectRef(ref);\n\n  const {fieldProps, inputProps} = useField({\n    ...other,\n    focusRef: objRef,\n    labelElementType: 'span',\n  });\n\n  fieldClassNames.wrapper = clsx(\n    fieldClassNames.wrapper,\n    other.disabled && 'pointer-events-none',\n  );\n\n  return (\n    <Field\n      wrapperProps={mergeProps<ComponentPropsWithoutRef<'div'>[]>(\n        wrapperProps!,\n        {\n          onBlur: e => {\n            if (!objRef.current?.contains(e.relatedTarget)) {\n              onBlur?.(e);\n            }\n          },\n          onClick: () => {\n            // focus first segment when clicking on label or somewhere else in the field, but no directly on segment\n            const focusManager = createFocusManager(objRef);\n            focusManager?.focusFirst();\n          },\n        },\n      )}\n      fieldClassNames={fieldClassNames}\n      ref={objRef}\n      {...fieldProps}\n    >\n      <Input\n        inputProps={inputProps}\n        className={clsx(fieldClassNames.input, 'gap-10')}\n        ref={inputRef}\n      >\n        {children}\n      </Input>\n    </Field>\n  );\n});\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function adjustSegment(\n  value: ZonedDateTime,\n  part: string,\n  amount: number,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (part) {\n    case 'era':\n    case 'year':\n    case 'month':\n    case 'day':\n      return value.cycle(part, amount, {round: part === 'year'});\n  }\n\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod': {\n        const hours = value.hour;\n        const isPM = hours >= 12;\n        return value.set({hour: isPM ? hours - 12 : hours + 12});\n      }\n      case 'hour':\n      case 'minute':\n      case 'second':\n        return value.cycle(part, amount, {\n          round: part !== 'hour',\n          hourCycle: options.hour12 ? 12 : 24,\n        });\n    }\n  }\n\n  return value;\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function setSegment(\n  value: ZonedDateTime,\n  part: string,\n  segmentValue: number,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (part) {\n    case 'day':\n    case 'month':\n    case 'year':\n      return value.set({[part]: segmentValue});\n  }\n\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod': {\n        const hours = value.hour;\n        const wasPM = hours >= 12;\n        const isPM = segmentValue >= 12;\n        if (isPM === wasPM) {\n          return value;\n        }\n        return value.set({hour: wasPM ? hours - 12 : hours + 12});\n      }\n      case 'hour':\n        // In 12 hour time, ensure that AM/PM does not change\n        if (options.hour12) {\n          const hours = value.hour;\n          const wasPM = hours >= 12;\n          if (!wasPM && segmentValue === 12) {\n            segmentValue = 0;\n          }\n          if (wasPM && segmentValue < 12) {\n            segmentValue += 12;\n          }\n        }\n      // fallthrough\n      case 'minute':\n      case 'second':\n        return value.set({[part]: segmentValue});\n    }\n  }\n\n  return value;\n}\n","export const PAGE_STEP = {\n  year: 5,\n  month: 2,\n  day: 7,\n  hour: 2,\n  minute: 15,\n  second: 15,\n  dayPeriod: 1,\n};\n","import {useFocusManager} from '@react-aria/focus';\nimport React, {\n  ComponentPropsWithoutRef,\n  HTMLAttributes,\n  KeyboardEventHandler,\n  useMemo,\n  useRef,\n} from 'react';\nimport {NumberParser} from '@internationalized/number';\nimport {mergeProps} from '@react-aria/utils';\nimport {today, ZonedDateTime} from '@internationalized/date';\nimport {useSelectedLocale} from '@ui/i18n/selected-locale';\nimport {useDateFormatter} from '@ui/i18n/use-date-formatter';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {adjustSegment} from './utils/adjust-segment';\nimport {setSegment} from './utils/set-segment';\nimport {PAGE_STEP} from './utils/page-step';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\nimport {useIsMobileMediaQuery} from '@ui/utils/hooks/is-mobile-media-query';\n\nexport interface EditableSegment {\n  type: 'day' | 'dayPeriod' | 'hour' | 'minute' | 'month' | 'second' | 'year';\n  text: string;\n  value: number;\n  minValue: number;\n  maxValue: number;\n  minLength: number;\n}\n\ninterface DatePickerSegmentProps {\n  segment: EditableSegment;\n  domProps?: ComponentPropsWithoutRef<'div'>;\n  state: DatePickerState | DateRangePickerState;\n  value: ZonedDateTime;\n  onChange: (newValue: ZonedDateTime) => void;\n  isPlaceholder?: boolean;\n}\nexport function EditableDateSegment({\n  segment,\n  domProps,\n  value,\n  onChange,\n  isPlaceholder,\n  state: {timezone, calendarIsOpen, setCalendarIsOpen},\n}: DatePickerSegmentProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const enteredKeys = useRef('');\n  const {localeCode} = useSelectedLocale();\n  const focusManager = useFocusManager();\n  const formatter = useDateFormatter({timeZone: timezone});\n  const parser = useMemo(\n    () => new NumberParser(localeCode, {maximumFractionDigits: 0}),\n    [localeCode],\n  );\n\n  const setSegmentValue = (newValue: number) => {\n    onChange(\n      setSegment(value, segment.type, newValue, formatter.resolvedOptions()),\n    );\n  };\n\n  const adjustSegmentValue = (amount: number) => {\n    onChange(\n      adjustSegment(value, segment.type, amount, formatter.resolvedOptions()),\n    );\n  };\n\n  const backspace = () => {\n    if (parser.isValidPartialNumber(segment.text)) {\n      const newValue = segment.text.slice(0, -1);\n      const parsed = parser.parse(newValue);\n      if (newValue.length === 0 || parsed === 0) {\n        const now = today(timezone);\n        if (segment.type in now) {\n          // @ts-ignore\n          setSegmentValue(now[segment.type]);\n        }\n      } else {\n        setSegmentValue(parsed);\n      }\n      enteredKeys.current = newValue;\n    } else if (segment.type === 'dayPeriod') {\n      adjustSegmentValue(-1);\n    }\n  };\n\n  const onKeyDown: KeyboardEventHandler = e => {\n    if (e.ctrlKey || e.metaKey || e.shiftKey || e.altKey) {\n      return;\n    }\n\n    // Navigation between date segments and deletion\n    switch (e.key) {\n      case 'ArrowLeft':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager?.focusPrevious();\n        break;\n      case 'ArrowRight':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager?.focusNext();\n        break;\n      case 'Enter':\n        (e.target as HTMLElement).closest('form')?.requestSubmit();\n        setCalendarIsOpen(!calendarIsOpen);\n        break;\n      case 'Tab':\n        break;\n      case 'Backspace':\n      case 'Delete': {\n        e.preventDefault();\n        e.stopPropagation();\n        backspace();\n        break;\n      }\n\n      // Spinbutton incrementing/decrementing\n      case 'ArrowUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(1);\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-1);\n        break;\n      case 'PageUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(PAGE_STEP[segment.type] || 1);\n        break;\n      case 'PageDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-(PAGE_STEP[segment.type] || 1));\n        break;\n      case 'Home':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.maxValue);\n        break;\n      case 'End':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.minValue);\n        break;\n    }\n\n    onInput(e.key);\n  };\n\n  const amPmFormatter = useDateFormatter({hour: 'numeric', hour12: true});\n  const am = useMemo(() => {\n    const amDate = new Date();\n    amDate.setHours(0);\n    return amPmFormatter\n      .formatToParts(amDate)\n      .find(part => part.type === 'dayPeriod')!.value;\n  }, [amPmFormatter]);\n  const pm = useMemo(() => {\n    const pmDate = new Date();\n    pmDate.setHours(12);\n    return amPmFormatter\n      .formatToParts(pmDate)\n      .find(part => part.type === 'dayPeriod')!.value;\n  }, [amPmFormatter]);\n\n  // Update date values on user keyboard input\n  const onInput = (key: string) => {\n    const newValue = enteredKeys.current + key;\n\n    switch (segment.type) {\n      case 'dayPeriod':\n        if (am.toLowerCase().startsWith(key)) {\n          setSegmentValue(0);\n        } else if (pm.toLowerCase().startsWith(key)) {\n          setSegmentValue(12);\n        } else {\n          break;\n        }\n        focusManager?.focusNext();\n        break;\n      case 'day':\n      case 'hour':\n      case 'minute':\n      case 'second':\n      case 'month':\n      case 'year': {\n        if (!parser.isValidPartialNumber(newValue)) {\n          return;\n        }\n\n        let numberValue = parser.parse(newValue);\n        let segmentValue = numberValue;\n        let allowsZero = segment.minValue === 0;\n        if (segment.type === 'hour' && formatter.resolvedOptions().hour12) {\n          switch (formatter.resolvedOptions().hourCycle) {\n            case 'h11':\n              if (numberValue > 11) {\n                segmentValue = parser.parse(key);\n              }\n              break;\n            case 'h12':\n              allowsZero = false;\n              if (numberValue > 12) {\n                segmentValue = parser.parse(key);\n              }\n              break;\n          }\n\n          if (segment.value >= 12 && numberValue > 1) {\n            numberValue += 12;\n          }\n        } else if (numberValue > segment.maxValue) {\n          segmentValue = parser.parse(key);\n        }\n\n        if (Number.isNaN(numberValue)) {\n          return;\n        }\n\n        const shouldSetValue = segmentValue !== 0 || allowsZero;\n        if (shouldSetValue) {\n          setSegmentValue(segmentValue);\n        }\n\n        if (\n          Number(`${numberValue}0`) > segment.maxValue ||\n          newValue.length >= String(segment.maxValue).length\n        ) {\n          enteredKeys.current = '';\n          if (shouldSetValue) {\n            focusManager?.focusNext();\n          }\n        } else {\n          enteredKeys.current = newValue;\n        }\n        break;\n      }\n    }\n  };\n\n  const spinButtonProps: HTMLAttributes<HTMLDivElement> = isMobile\n    ? {}\n    : {\n        'aria-label': segment.type,\n        'aria-valuetext': isPlaceholder ? undefined : `${segment.value}`,\n        'aria-valuemin': segment.minValue,\n        'aria-valuemax': segment.maxValue,\n        'aria-valuenow': isPlaceholder ? undefined : segment.value,\n        tabIndex: 0,\n        onKeyDown,\n      };\n\n  return (\n    <div\n      {...mergeProps(domProps!, {\n        ...spinButtonProps,\n        onFocus: e => {\n          enteredKeys.current = '';\n          e.target.scrollIntoView({block: 'nearest'});\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n      } as HTMLAttributes<HTMLDivElement>)}\n      className=\"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary\"\n    >\n      {segment.text.padStart(segment.minLength, '0')}\n    </div>\n  );\n}\n","import {useFocusManager} from '@react-aria/focus';\nimport {ComponentPropsWithoutRef} from 'react';\n\nexport interface LiteralSegment {\n  type: 'literal';\n  minLength: 1;\n  text: string;\n}\n\ninterface LiteralSegmentProps extends ComponentPropsWithoutRef<'div'> {\n  segment: LiteralSegment;\n  domProps?: ComponentPropsWithoutRef<'div'>;\n}\nexport function LiteralDateSegment({segment, domProps}: LiteralSegmentProps) {\n  const focusManager = useFocusManager();\n  return (\n    <div\n      {...domProps}\n      onPointerDown={e => {\n        if (e.pointerType === 'mouse') {\n          e.preventDefault();\n          const res = focusManager?.focusNext({from: e.target as HTMLElement});\n          if (!res) {\n            focusManager?.focusPrevious({from: e.target as HTMLElement});\n          }\n        }\n      }}\n      aria-hidden\n      className=\"min-w-4 cursor-default select-none\"\n    >\n      {segment.text}\n    </div>\n  );\n}\n","import {\n  DateValue,\n  getMinimumDayInMonth,\n  getMinimumMonthInYear,\n} from '@internationalized/date';\n\nexport function getSegmentLimits(\n  date: DateValue,\n  type: string,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (type) {\n    case 'year':\n      return {\n        value: date.year,\n        placeholder: 'yyyy',\n        minValue: 1,\n        maxValue: date.calendar.getYearsInEra(date),\n      };\n    case 'month':\n      return {\n        value: date.month,\n        placeholder: 'mm',\n        minValue: getMinimumMonthInYear(date),\n        maxValue: date.calendar.getMonthsInYear(date),\n      };\n    case 'day':\n      return {\n        value: date.day,\n        minValue: getMinimumDayInMonth(date),\n        maxValue: date.calendar.getDaysInMonth(date),\n        placeholder: 'dd',\n      };\n  }\n\n  if ('hour' in date) {\n    switch (type) {\n      case 'dayPeriod':\n        return {\n          value: date.hour >= 12 ? 12 : 0,\n          minValue: 0,\n          maxValue: 12,\n          placeholder: '--',\n        };\n      case 'hour':\n        if (options.hour12) {\n          const isPM = date.hour >= 12;\n          return {\n            value: date.hour,\n            minValue: isPM ? 12 : 0,\n            maxValue: isPM ? 23 : 11,\n            placeholder: '--',\n          };\n        }\n\n        return {\n          value: date.hour,\n          minValue: 0,\n          maxValue: 23,\n          placeholder: '--',\n        };\n      case 'minute':\n        return {\n          value: date.minute,\n          minValue: 0,\n          maxValue: 59,\n          placeholder: '--',\n        };\n    }\n  }\n\n  return {};\n}\n","import React, {ComponentPropsWithoutRef, useMemo} from 'react';\nimport {ZonedDateTime} from '@internationalized/date';\nimport {EditableDateSegment, EditableSegment} from './editable-date-segment';\nimport {LiteralDateSegment, LiteralSegment} from './literal-segment';\nimport {useDateFormatter} from '@ui/i18n/use-date-formatter';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {getSegmentLimits} from './utils/get-segment-limits';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface DateSegmentListProps {\n  segmentProps?: ComponentPropsWithoutRef<'div'>;\n  state: DatePickerState | DateRangePickerState;\n  value: ZonedDateTime;\n  onChange: (newValue: ZonedDateTime) => void;\n  isPlaceholder?: boolean;\n}\nexport function DateSegmentList({\n  segmentProps,\n  state,\n  value,\n  onChange,\n  isPlaceholder,\n}: DateSegmentListProps) {\n  const {granularity, timezone} = state;\n  const options = useMemo(() => {\n    const memoOptions: Intl.DateTimeFormatOptions = {\n      year: 'numeric',\n      month: 'numeric',\n      day: 'numeric',\n      timeZone: timezone,\n    };\n    if (granularity === 'minute') {\n      memoOptions.hour = 'numeric';\n      memoOptions.minute = 'numeric';\n    }\n    return memoOptions;\n  }, [granularity, timezone]);\n\n  const formatter = useDateFormatter(options);\n\n  const dateValue = useMemo(() => value.toDate(), [value]);\n  const segments = useMemo(() => {\n    return formatter.formatToParts(dateValue).map(segment => {\n      const limits = getSegmentLimits(\n        value,\n        segment.type,\n        formatter.resolvedOptions(),\n      );\n      const textValue =\n        isPlaceholder && segment.type !== 'literal'\n          ? limits.placeholder\n          : segment.value;\n      return {\n        type: segment.type,\n        text: segment.value === ', ' ? ' ' : textValue,\n        ...limits,\n        minLength:\n          segment.type !== 'literal' ? String(limits.maxValue).length : 1,\n      } as LiteralSegment | EditableSegment;\n    });\n  }, [dateValue, formatter, isPlaceholder, value]);\n\n  return (\n    <div className=\"flex items-center\">\n      {segments.map((segment, index) => {\n        if (segment.type === 'literal') {\n          return (\n            <LiteralDateSegment\n              domProps={segmentProps}\n              key={index}\n              segment={segment}\n            />\n          );\n        }\n        return (\n          <EditableDateSegment\n            isPlaceholder={isPlaceholder}\n            domProps={segmentProps}\n            state={state}\n            value={value}\n            onChange={onChange}\n            segment={segment}\n            key={index}\n          />\n        );\n      })}\n    </div>\n  );\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function startOfDay(date: ZonedDateTime): ZonedDateTime {\n  return date.set({hour: 0, minute: 0, second: 0, millisecond: 0});\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function endOfDay(date: ZonedDateTime): ZonedDateTime {\n  return date.set({\n    hour: 24 - 1,\n    minute: 60 - 1,\n    second: 60 - 1,\n    millisecond: 1000 - 1,\n  });\n}\n","import {DateRangeValue} from '../date-range-value';\nimport {message} from '@ui/i18n/message';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\nimport {\n  endOfMonth,\n  endOfWeek,\n  endOfYear,\n  startOfMonth,\n  startOfWeek,\n  startOfYear,\n} from '@internationalized/date';\nimport {startOfDay} from '@ui/utils/date/start-of-day';\nimport {endOfDay} from '@ui/utils/date/end-of-day';\nimport {getBootstrapData} from '@ui/bootstrap-data/bootstrap-data-store';\nimport {getCurrentDateTime} from '@ui/i18n/use-current-date-time';\n\nconst Now = startOfDay(getCurrentDateTime());\nconst locale = getBootstrapData()?.i18n?.language || 'en';\n\nexport interface DateRangePreset {\n  key: number;\n  label: MessageDescriptor;\n  getRangeValue: () => DateRangeValue;\n}\n\nexport const DateRangePresets: DateRangePreset[] = [\n  {\n    key: 0,\n    label: message('Today'),\n    getRangeValue: () => ({\n      preset: 0,\n      start: Now,\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 1,\n    label: message('Yesterday'),\n    getRangeValue: () => ({\n      preset: 1,\n      start: Now.subtract({days: 1}),\n      end: endOfDay(Now).subtract({days: 1}),\n    }),\n  },\n  {\n    key: 2,\n    label: message('This week'),\n    getRangeValue: () => ({\n      preset: 2,\n      start: startOfWeek(Now, locale),\n      end: endOfWeek(endOfDay(Now), locale),\n    }),\n  },\n  {\n    key: 3,\n    label: message('Last week'),\n    getRangeValue: () => {\n      const start = startOfWeek(Now, locale).subtract({days: 7});\n      return {\n        preset: 3,\n        start,\n        end: start.add({days: 6}),\n      };\n    },\n  },\n  {\n    key: 4,\n    label: message('Last 7 days'),\n    getRangeValue: () => ({\n      preset: 4,\n      start: Now.subtract({days: 7}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 5,\n    label: message('Last 30 days'),\n    getRangeValue: () => ({\n      preset: 5,\n      start: Now.subtract({days: 30}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 6,\n    label: message('Last 3 months'),\n    getRangeValue: () => ({\n      preset: 6,\n      start: Now.subtract({months: 3}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 7,\n    label: message('Last 12 months'),\n    getRangeValue: () => ({\n      preset: 7,\n      start: Now.subtract({months: 12}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 8,\n    label: message('This month'),\n    getRangeValue: () => ({\n      preset: 8,\n      start: startOfMonth(Now),\n      end: endOfMonth(endOfDay(Now)),\n    }),\n  },\n  {\n    key: 9,\n    label: message('This year'),\n    getRangeValue: () => ({\n      preset: 9,\n      start: startOfYear(Now),\n      end: endOfYear(endOfDay(Now)),\n    }),\n  },\n  {\n    key: 10,\n    label: message('Last year'),\n    getRangeValue: () => ({\n      preset: 10,\n      start: startOfYear(Now).subtract({years: 1}),\n      end: endOfYear(endOfDay(Now)).subtract({years: 1}),\n    }),\n  },\n];\n","import {useControlledState} from '@react-stately/utils';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  CalendarDate,\n  DateValue,\n  endOfMonth,\n  isSameDay,\n  isSameMonth,\n  maxDate,\n  minDate,\n  startOfMonth,\n  toCalendarDate,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {\n  BaseDatePickerState,\n  DatePickerValueProps,\n} from '../date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-value';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\nimport {startOfDay} from '@ui/utils/date/start-of-day';\nimport {endOfDay} from '@ui/utils/date/end-of-day';\nimport {useCurrentDateTime} from '@ui/i18n/use-current-date-time';\nimport {toSafeZoned} from '@ui/i18n/to-safe-zoned';\n\nexport interface IsPlaceholderValue {\n  start: boolean;\n  end: boolean;\n}\n\nexport type DateRangePickerState = BaseDatePickerState<\n  DateRangeValue,\n  IsPlaceholderValue\n>;\n\nexport function useDateRangePickerState(\n  props: DatePickerValueProps<Partial<DateRangeValue>, DateRangeValue>,\n): DateRangePickerState {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState<IsPlaceholderValue>({\n    start: (!props.value || !props.value.start) && !props.defaultValue?.start,\n    end: (!props.value || !props.value.end) && !props.defaultValue?.end,\n  });\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(\n    props.value ? completeRange(props.value, now) : undefined,\n    !props.value ? completeRange(props.defaultValue, now) : undefined,\n    value => {\n      setIsPlaceholder({start: false, end: false});\n      setStateValue?.(value);\n    },\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(internalValue.start, props);\n\n  const clear = useCallback(() => {\n    setIsPlaceholder({start: true, end: true});\n    setInternalValue(completeRange(null, now));\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n\n  const [anchorDate, setAnchorDate] = useState<CalendarDate | null>(null);\n  const [isHighlighting, setIsHighlighting] = useState(false);\n  const [highlightedRange, setHighlightedRange] =\n    useState<DateRangeValue>(internalValue);\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return rangeToCalendarDates(internalValue, max);\n  });\n\n  const constrainRange = useCallback(\n    (range: DateRangeValue): DateRangeValue => {\n      let start = range.start;\n      let end = range.end;\n\n      // make sure start date is after min date and before max date/range end\n      if (min) {\n        start = maxDate(start, min);\n      }\n      const startMax = max ? minDate(max, end) : end;\n      start = minDate(start, startMax);\n\n      // make sure end date is after min date/range start and before max date\n      const endMin = min ? maxDate(min, start) : start;\n      end = maxDate(end, endMin);\n\n      if (max) {\n        end = minDate(end, max);\n      }\n\n      return {\n        start: toSafeZoned(start, timezone),\n        end: toSafeZoned(end, timezone),\n      };\n    },\n    [min, max, timezone],\n  );\n\n  const setSelectedValue = useCallback(\n    (newRange: DateRangeValue) => {\n      const value = {\n        ...constrainRange(newRange),\n        preset: newRange.preset,\n      };\n      setInternalValue(value);\n      setHighlightedRange(value);\n      setCalendarDates(rangeToCalendarDates(value, max));\n      setIsPlaceholder({start: false, end: false});\n    },\n    [setInternalValue, constrainRange, max],\n  );\n\n  const dayIsActive = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (!isPlaceholder.start && isSameDay(day, highlightedRange.start)) ||\n        (!isPlaceholder.end && isSameDay(day, highlightedRange.end))\n      );\n    },\n    [highlightedRange, isPlaceholder],\n  );\n\n  const dayIsHighlighted = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (isHighlighting || (!isPlaceholder.start && !isPlaceholder.end)) &&\n        day.compare(highlightedRange.start) >= 0 &&\n        day.compare(highlightedRange.end) <= 0\n      );\n    },\n    [highlightedRange, isPlaceholder, isHighlighting],\n  );\n\n  const dayIsRangeStart = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.start),\n    [highlightedRange],\n  );\n\n  const dayIsRangeEnd = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.end),\n    [highlightedRange],\n  );\n\n  const getCellProps = useCallback(\n    (date: CalendarDate, isSameMonth: boolean): HTMLAttributes<HTMLElement> => {\n      return {\n        onPointerEnter: () => {\n          if (isHighlighting && isSameMonth) {\n            setHighlightedRange(\n              makeRange({start: anchorDate!, end: date, timezone}),\n            );\n          }\n        },\n        onClick: () => {\n          if (!isHighlighting) {\n            setIsHighlighting(true);\n            setAnchorDate(date);\n            setHighlightedRange(makeRange({start: date, end: date, timezone}));\n          } else {\n            const finalRange = makeRange({\n              start: anchorDate!,\n              end: date,\n              timezone,\n            });\n            // cast to start and end of day after making range, because \"makeRange\"\n            // will flip start and end dates, if they are out of order\n            finalRange.start = startOfDay(finalRange.start);\n            finalRange.end = endOfDay(finalRange.end);\n            setIsHighlighting(false);\n            setAnchorDate(null);\n            setSelectedValue?.(finalRange);\n            if (closeDialogOnSelection) {\n              setCalendarIsOpen?.(false);\n            }\n          }\n        },\n      };\n    },\n    [\n      anchorDate,\n      isHighlighting,\n      setSelectedValue,\n      setCalendarIsOpen,\n      closeDialogOnSelection,\n      timezone,\n    ],\n  );\n\n  return {\n    selectedValue: internalValue,\n    setSelectedValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    calendarDates,\n    setIsPlaceholder,\n    isPlaceholder,\n    clear,\n    setCalendarDates,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection,\n  };\n}\n\nfunction rangeToCalendarDates(\n  range: DateRangeValue,\n  max?: DateValue,\n): CalendarDate[] {\n  let start = toCalendarDate(startOfMonth(range.start));\n  let end = toCalendarDate(endOfMonth(range.end));\n\n  // make sure we don't show the same month twice\n  if (isSameMonth(start, end)) {\n    end = endOfMonth(end.add({months: 1}));\n  }\n\n  // if next month is disabled, show previous instead\n  if (max && end.compare(max) > 0) {\n    end = start;\n    start = startOfMonth(start.subtract({months: 1}));\n  }\n  return [start, end];\n}\n\ninterface MakeRangeProps {\n  start: DateValue;\n  end: DateValue;\n  timezone: string;\n}\nfunction makeRange(props: MakeRangeProps): DateRangeValue {\n  const start = toSafeZoned(props.start, props.timezone);\n  const end = toSafeZoned(props.end, props.timezone);\n  if (start.compare(end) > 0) {\n    return {start: end, end: start};\n  }\n  return {start, end};\n}\n\nfunction completeRange(\n  range: Partial<DateRangeValue> | null | undefined,\n  now: ZonedDateTime,\n): DateRangeValue {\n  if (range?.start && range?.end) {\n    return range as DateRangeValue;\n  } else if (!range?.start && range?.end) {\n    range.start = range.end.subtract({months: 1});\n    return range as DateRangeValue;\n  } else if (!range?.end && range?.start) {\n    range.end = range.start.add({months: 1});\n    return range as DateRangeValue;\n  }\n  return {start: now, end: now.add({months: 1})};\n}\n","import {DateValue, parseAbsolute} from '@internationalized/date';\nimport {Fragment, memo} from 'react';\nimport {useDateFormatter} from '@ui/i18n/use-date-formatter';\nimport {useSettings} from '@ui/settings/use-settings';\nimport {shallowEqual} from '@ui/utils/shallow-equal';\nimport {useUserTimezone} from '@ui/i18n/use-user-timezone';\nimport {DateFormatPresets} from '@ui/i18n/formatted-date';\n\ninterface FormattedDateTimeRangeProps {\n  start?: string | DateValue | Date;\n  end?: string | DateValue | Date;\n  options?: Intl.DateTimeFormatOptions;\n  preset?: keyof typeof DateFormatPresets;\n  timezone?: string;\n}\nexport const FormattedDateTimeRange = memo(\n  ({\n    start,\n    end,\n    options,\n    preset,\n    timezone: propsTimezone,\n  }: FormattedDateTimeRangeProps) => {\n    const {dates} = useSettings();\n    const userTimezone = useUserTimezone();\n    const timezone = propsTimezone || options?.timeZone || userTimezone;\n    const formatter = useDateFormatter(\n      options ||\n        (DateFormatPresets as Record<string, Intl.DateTimeFormatOptions>)[\n          preset || dates?.format\n        ],\n    );\n\n    if (!start || !end) {\n      return null;\n    }\n\n    let value: string;\n\n    try {\n      value = formatter.formatRange(\n        castToDate(start, timezone),\n        castToDate(end, timezone),\n      );\n    } catch (e) {\n      value = '';\n    }\n\n    return <Fragment>{value}</Fragment>;\n  },\n  shallowEqual,\n);\n\nfunction castToDate(date: string | DateValue | Date, timezone: string): Date {\n  if (typeof date === 'string') {\n    return parseAbsolute(date, timezone).toDate();\n  }\n  if ('toDate' in date) {\n    return date.toDate(timezone);\n  }\n  return date;\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowRightAltIcon = createSvgIcon(\n  <path d=\"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z\" />\n, 'ArrowRightAltOutlined');\n","import {List, ListItem} from '@ui/list/list';\nimport {DateRangePresets} from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {Trans} from '@ui/i18n/trans';\nimport {DateRangeValue} from '@ui/forms/input-field/date/date-range-picker/date-range-value';\n\ninterface DateRangePresetList {\n  onPresetSelected: (value: DateRangeValue) => void;\n  selectedValue?: DateRangeValue | null;\n}\nexport function DatePresetList({\n  onPresetSelected,\n  selectedValue,\n}: DateRangePresetList) {\n  return (\n    <List>\n      {DateRangePresets.map(preset => (\n        <ListItem\n          borderRadius=\"rounded-none\"\n          capitalizeFirst\n          key={preset.key}\n          isSelected={selectedValue?.preset === preset.key}\n          onSelected={() => {\n            const newValue = preset.getRangeValue();\n            onPresetSelected(newValue);\n          }}\n        >\n          <Trans {...preset.label} />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n","import {message} from '@ui/i18n/message';\nimport {DateRangeValue} from '@ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\n\nexport interface DateRangeComparePreset {\n  key: number;\n  label: MessageDescriptor;\n  getRangeValue: (range: DateRangeValue) => DateRangeValue;\n}\n\nexport const DateRangeComparePresets: DateRangeComparePreset[] = [\n  {\n    key: 0,\n    label: message('Preceding period'),\n    getRangeValue: (range: DateRangeValue) => {\n      const startDate = range.start;\n      const endDate = range.end;\n\n      const diffInMilliseconds =\n        endDate.toDate().getTime() - startDate.toDate().getTime();\n      const diffInMinutes = diffInMilliseconds / (1000 * 60);\n      const newStart = startDate.subtract({minutes: diffInMinutes});\n      return {\n        preset: 0,\n        start: newStart,\n        end: startDate,\n      };\n    },\n  },\n  {\n    key: 1,\n    label: message('Same period last year'),\n    getRangeValue: (range: DateRangeValue) => {\n      return {\n        start: range.start.subtract({years: 1}),\n        end: range.end.subtract({years: 1}),\n        preset: 1,\n      };\n    },\n  },\n  {\n    key: 2,\n    label: message('Custom'),\n    getRangeValue: (range: DateRangeValue) => {\n      return {\n        start: range.start.subtract({weeks: 1}),\n        end: range.end.subtract({weeks: 1}),\n        preset: 2,\n      };\n    },\n  },\n];\n","import {List, ListItem} from '@ui/list/list';\nimport {Trans} from '@ui/i18n/trans';\nimport {DateRangeValue} from '@ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {DateRangeComparePresets} from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets';\n\ninterface DateRangePresetList {\n  originalRangeValue: DateRangeValue;\n  onPresetSelected: (value: DateRangeValue) => void;\n  selectedValue?: DateRangeValue | null;\n}\nexport function DateRangeComparePresetList({\n  originalRangeValue,\n  onPresetSelected,\n  selectedValue,\n}: DateRangePresetList) {\n  return (\n    <List>\n      {DateRangeComparePresets.map(preset => (\n        <ListItem\n          borderRadius=\"rounded-none\"\n          capitalizeFirst\n          key={preset.key}\n          isSelected={selectedValue?.preset === preset.key}\n          onSelected={() => {\n            const newValue = preset.getRangeValue(originalRangeValue);\n            onPresetSelected(newValue);\n          }}\n        >\n          <Trans {...preset.label} />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n","import React, {Fragment, ReactNode, useRef, useState} from 'react';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {DatePickerField} from '../date-picker-field';\nimport {DateRangePickerState} from '../use-date-range-picker-state';\nimport {Calendar} from '../../calendar/calendar';\nimport {DialogFooter} from '@ui/overlays/dialog/dialog-footer';\nimport {Button} from '@ui/buttons/button';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {ArrowRightAltIcon} from '@ui/icons/material/ArrowRightAlt';\nimport {DateSegmentList} from '../../segments/date-segment-list';\nimport {Trans} from '@ui/i18n/trans';\nimport {FormattedDateTimeRange} from '@ui/i18n/formatted-date-time-range';\nimport {DatePresetList} from './date-range-preset-list';\nimport {useIsTabletMediaQuery} from '@ui/utils/hooks/is-tablet-media-query';\nimport {Switch} from '@ui/forms/toggle/switch';\nimport {DateRangeComparePresetList} from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-preset-list';\n\ninterface DateRangeDialogProps {\n  state: DateRangePickerState;\n  compareState?: DateRangePickerState;\n  compareVisibleDefault?: boolean;\n  showInlineDatePickerField?: boolean;\n}\nexport function DateRangeDialog({\n  state,\n  compareState,\n  showInlineDatePickerField = false,\n  compareVisibleDefault = false,\n}: DateRangeDialogProps) {\n  const isTablet = useIsTabletMediaQuery();\n  const {close} = useDialogContext();\n  const initialStateRef = useRef<DateRangePickerState>(state);\n  const hasPlaceholder = state.isPlaceholder.start || state.isPlaceholder.end;\n  const [compareVisible, setCompareVisible] = useState(compareVisibleDefault);\n\n  const footer = (\n    <DialogFooter\n      dividerTop\n      startAction={\n        !hasPlaceholder && !isTablet ? (\n          <div className=\"text-xs\">\n            <FormattedDateTimeRange\n              start={state.selectedValue.start.toDate()}\n              end={state.selectedValue.end.toDate()}\n              options={{dateStyle: 'medium'}}\n            />\n          </div>\n        ) : undefined\n      }\n    >\n      <Button\n        variant=\"text\"\n        size=\"xs\"\n        onClick={() => {\n          state.setSelectedValue(initialStateRef.current.selectedValue);\n          state.setIsPlaceholder(initialStateRef.current.isPlaceholder);\n          close();\n        }}\n      >\n        <Trans message=\"Cancel\" />\n      </Button>\n      <Button\n        variant=\"flat\"\n        color=\"primary\"\n        size=\"xs\"\n        onClick={() => {\n          const value = state.selectedValue;\n          if (compareState && compareVisible) {\n            value.compareStart = compareState.selectedValue.start;\n            value.compareEnd = compareState.selectedValue.end;\n          }\n          close(value);\n        }}\n      >\n        <Trans message=\"Select\" />\n      </Button>\n    </DialogFooter>\n  );\n\n  return (\n    <Dialog size=\"auto\">\n      <DialogBody className=\"flex\" padding=\"p-0\">\n        {!isTablet && (\n          <div className=\"min-w-192 py-14\">\n            <DatePresetList\n              selectedValue={state.selectedValue}\n              onPresetSelected={preset => {\n                state.setSelectedValue(preset);\n                if (state.closeDialogOnSelection) {\n                  close(preset);\n                }\n              }}\n            />\n            {!!compareState && (\n              <Fragment>\n                <Switch\n                  className=\"mx-20 mb-10 mt-14\"\n                  checked={compareVisible}\n                  onChange={e => setCompareVisible(e.target.checked)}\n                >\n                  <Trans message=\"Compare\" />\n                </Switch>\n                {compareVisible && (\n                  <DateRangeComparePresetList\n                    originalRangeValue={state.selectedValue}\n                    selectedValue={compareState.selectedValue}\n                    onPresetSelected={preset => {\n                      compareState.setSelectedValue(preset);\n                    }}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        )}\n        <AnimatePresence initial={false}>\n          <Calendars\n            state={state}\n            compareState={compareState}\n            showInlineDatePickerField={showInlineDatePickerField}\n            compareVisible={compareVisible}\n          />\n        </AnimatePresence>\n      </DialogBody>\n      {!state.closeDialogOnSelection && footer}\n    </Dialog>\n  );\n}\n\ninterface CustomRangePanelProps {\n  state: DateRangePickerState;\n  compareState?: DateRangePickerState;\n  showInlineDatePickerField?: boolean;\n  compareVisible: boolean;\n}\nfunction Calendars({\n  state,\n  compareState,\n  showInlineDatePickerField,\n  compareVisible,\n}: CustomRangePanelProps) {\n  return (\n    <m.div\n      initial={{width: 0, overflow: 'hidden'}}\n      animate={{width: 'auto'}}\n      exit={{width: 0, overflow: 'hidden'}}\n      transition={{type: 'tween', duration: 0.125}}\n      className=\"border-l px-20 pb-20 pt-10\"\n    >\n      {showInlineDatePickerField && (\n        <div>\n          <InlineDatePickerField state={state} />\n          {!!compareState && compareVisible && (\n            <InlineDatePickerField\n              state={compareState}\n              label={<Trans message=\"Compare\" />}\n            />\n          )}\n        </div>\n      )}\n      <div className=\"flex items-start gap-36\">\n        <Calendar state={state} visibleMonths={2} />\n      </div>\n    </m.div>\n  );\n}\n\ninterface InlineDatePickerFieldProps {\n  state: DateRangePickerState;\n  label?: ReactNode;\n}\nfunction InlineDatePickerField({state, label}: InlineDatePickerFieldProps) {\n  const {selectedValue, setSelectedValue} = state;\n  return (\n    <DatePickerField className=\"mb-20 mt-10\" label={label}>\n      <DateSegmentList\n        state={state}\n        value={selectedValue.start}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, start: newValue});\n        }}\n      />\n      <ArrowRightAltIcon className=\"block flex-shrink-0 text-muted\" size=\"md\" />\n      <DateSegmentList\n        state={state}\n        value={selectedValue.end}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, end: newValue});\n        }}\n      />\n    </DatePickerField>\n  );\n}\n","import {useDateRangePickerState} from '@ui/forms/input-field/date/date-range-picker/use-date-range-picker-state';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {Button} from '@ui/buttons/button';\nimport {DateRangeIcon} from '@ui/icons/material/DateRange';\nimport {FormattedDateTimeRange} from '@ui/i18n/formatted-date-time-range';\nimport {DateRangeDialog} from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-dialog';\nimport React from 'react';\nimport {DateRangeValue} from '@ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {useIsMobileMediaQuery} from '@ui/utils/hooks/is-mobile-media-query';\nimport {DateFormatPresets} from '@ui/i18n/formatted-date';\nimport {DateRangeComparePresets} from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets';\nimport {Granularity} from '@ui/forms/input-field/date/date-picker/use-date-picker-state';\n\nconst monthDayFormat: Intl.DateTimeFormatOptions = {\n  month: 'short',\n  day: '2-digit',\n};\n\ninterface ReportDataSelectorProps {\n  value: DateRangeValue;\n  disabled?: boolean;\n  onChange: (value: DateRangeValue) => void;\n  compactOnMobile?: boolean;\n  enableCompare?: boolean;\n  granularity?: Granularity;\n}\nexport function ReportDateSelector({\n  value,\n  onChange,\n  disabled,\n  compactOnMobile = true,\n  enableCompare = false,\n  granularity = 'minute',\n}: ReportDataSelectorProps) {\n  const isMobile = useIsMobileMediaQuery();\n  return (\n    <DialogTrigger\n      type=\"popover\"\n      onClose={value => {\n        if (value) {\n          onChange(value);\n        }\n      }}\n    >\n      <Button\n        variant=\"outline\"\n        color=\"chip\"\n        endIcon={<DateRangeIcon />}\n        disabled={disabled}\n      >\n        <FormattedDateTimeRange\n          start={value.start}\n          end={value.end}\n          options={\n            isMobile && compactOnMobile\n              ? monthDayFormat\n              : DateFormatPresets.short\n          }\n        />\n      </Button>\n      <DateSelectorDialog\n        value={value}\n        enableCompare={enableCompare}\n        granularity={granularity}\n      />\n    </DialogTrigger>\n  );\n}\n\ninterface DateSelectorDialogProps {\n  value: DateRangeValue;\n  enableCompare: boolean;\n  granularity: Granularity;\n}\nfunction DateSelectorDialog({\n  value,\n  enableCompare,\n  granularity,\n}: DateSelectorDialogProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const state = useDateRangePickerState({\n    granularity,\n    defaultValue: {\n      start: value.start,\n      end: value.end,\n      preset: value.preset,\n    },\n    closeDialogOnSelection: false,\n  });\n  const compareHasInitialValue = !!value.compareStart && !!value.compareEnd;\n  const compareState = useDateRangePickerState({\n    granularity,\n    defaultValue: compareHasInitialValue\n      ? {\n          start: value.compareStart,\n          end: value.compareEnd,\n          preset: value.comparePreset,\n        }\n      : DateRangeComparePresets[0].getRangeValue(state.selectedValue),\n  });\n  return (\n    <DateRangeDialog\n      state={state}\n      compareState={enableCompare ? compareState : undefined}\n      compareVisibleDefault={compareHasInitialValue}\n      showInlineDatePickerField={!isMobile}\n    />\n  );\n}\n","import {ReactNode, Ref} from 'react';\nimport clsx from 'clsx';\n\nexport interface ChartLayoutProps {\n  title: ReactNode;\n  description?: ReactNode;\n  className?: string;\n  children: ReactNode;\n  contentIsFlex?: boolean;\n  contentClassName?: string;\n  contentRef?: Ref<HTMLDivElement>;\n  isLoading?: boolean;\n}\nexport function ChartLayout(props: ChartLayoutProps) {\n  const {\n    title,\n    description,\n    children,\n    className,\n    contentIsFlex = true,\n    contentClassName,\n    contentRef,\n  } = props;\n\n  return (\n    <div\n      className={clsx(\n        'flex h-full flex-auto flex-col rounded-panel border bg p-20 dark:bg-alt',\n        className,\n      )}\n    >\n      <div className=\"flex flex-shrink-0 items-center justify-between pb-10 text-xs\">\n        <div className=\"text-sm font-semibold\">{title}</div>\n        {description && <div className=\"text-muted\">{description}</div>}\n      </div>\n      <div\n        ref={contentRef}\n        className={clsx(\n          'relative',\n          contentIsFlex && 'flex flex-auto items-center justify-center',\n          contentClassName,\n        )}\n      >\n        {children}\n      </div>\n    </div>\n  );\n}\n","import {ProgressCircle} from '@ui/progress/progress-circle';\nimport {Trans} from '@ui/i18n/trans';\n\nexport function ChartLoadingIndicator() {\n  return (\n    <div className=\"absolute mx-auto flex items-center gap-10 text-sm\">\n      <ProgressCircle isIndeterminate size=\"sm\" />\n      <Trans message=\"Chart loading\" />\n    </div>\n  );\n}\n","import type {ChartData, ChartOptions, ChartType} from 'chart.js';\nimport {lazy, Suspense} from 'react';\nimport {ChartLayout, ChartLayoutProps} from './chart-layout';\nimport {ChartLoadingIndicator} from '@common/charts/chart-loading-indicator';\nimport clsx from 'clsx';\n\nconst LazyChart = lazy(() => import('./lazy-chart'));\n\nexport interface BaseChartProps<Type extends ChartType = ChartType>\n  extends Omit<ChartLayoutProps, 'children'> {\n  type: Type;\n  data: ChartData<Type, unknown>;\n  options?: ChartOptions<Type>;\n  hideLegend?: boolean;\n  rowSpan?: string;\n  colSpan?: string;\n}\nexport function BaseChart<Type extends ChartType = ChartType>(\n  props: BaseChartProps<Type>,\n) {\n  const {\n    title,\n    description,\n    className,\n    rowSpan = 'row-span-11',\n    colSpan = 'col-span-6',\n    contentRef,\n    isLoading,\n  } = props;\n\n  return (\n    <ChartLayout\n      title={title}\n      description={description}\n      className={clsx(className, rowSpan, colSpan)}\n      contentRef={contentRef}\n    >\n      <Suspense fallback={<ChartLoadingIndicator />}>\n        <LazyChart {...props} />\n        {isLoading && <ChartLoadingIndicator />}\n      </Suspense>\n    </ChartLayout>\n  );\n}\n","import {DateFormatter, parseAbsoluteToLocal} from '@internationalized/date';\nimport memoize from 'nano-memoize';\nimport {ChartType} from 'chart.js';\nimport {\n  FormattedDatasetItem,\n  FormattedReportData,\n} from './formatted-dataset-item';\nimport {\n  DatasetItem,\n  RangedDatasetGranularity,\n  ReportMetric,\n} from '../../admin/analytics/report-metric';\nimport {shallowEqual} from '@ui/utils/shallow-equal';\n\ninterface Options {\n  localeCode: string;\n  shareFirstDatasetLabels?: boolean;\n}\n\ntype FormattedDatasetLabels = Omit<FormattedDatasetItem, 'value'>;\n\nexport function formatReportData(\n  report: ReportMetric<DatasetItem> | undefined,\n  {localeCode = 'en', shareFirstDatasetLabels = true}: Options,\n): FormattedReportData {\n  if (!report) return {datasets: []};\n\n  const firstDatasetLabels: FormattedDatasetLabels[] = [];\n\n  return {\n    ...report,\n    datasets: report.datasets.map((dataset, datasetIndex) => {\n      const data = dataset.data.map((datasetItem, itemIndex) => {\n        let label: FormattedDatasetLabels;\n        // when there are multiple datasets, we'll need to use labels from the first dataset, so charts are\n        // overlapped over one another, otherwise they will be side by side, if labels in all datasets are not identical.\n        if (datasetIndex === 0 || !shareFirstDatasetLabels) {\n          label = generateDatasetLabels(\n            datasetItem,\n            report.granularity,\n            localeCode,\n          );\n          firstDatasetLabels[itemIndex] = label;\n        } else {\n          label = firstDatasetLabels[itemIndex];\n        }\n        return {\n          ...label,\n          value: datasetItem.value,\n        };\n      });\n\n      return {...dataset, data};\n    }),\n  };\n}\n\nfunction generateDatasetLabels<T extends ChartType = ChartType>(\n  datum: DatasetItem,\n  granularity: RangedDatasetGranularity | undefined,\n  locale: string,\n): FormattedDatasetLabels {\n  if (datum.label) {\n    return {label: datum.label};\n  }\n\n  if (!datum.date) {\n    return {label: ''};\n  }\n\n  return generateTimeLabels(datum, granularity, locale);\n}\n\nfunction generateTimeLabels(\n  {date: isoDate, endDate: isoEndDate}: DatasetItem,\n  granularity: RangedDatasetGranularity | undefined = 'day',\n  locale: string,\n): Omit<FormattedDatasetItem, 'value'> {\n  const date = parseAbsoluteToLocal(isoDate!).toDate();\n  const endDate = isoEndDate ? parseAbsoluteToLocal(isoEndDate).toDate() : null;\n\n  switch (granularity) {\n    case 'minute':\n      return {\n        label: getFormatter(locale, {\n          second: '2-digit',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          day: '2-digit',\n          hour: 'numeric',\n          minute: 'numeric',\n          second: '2-digit',\n        }).format(date),\n      };\n    case 'hour':\n      return {\n        label: getFormatter(locale, {\n          hour: 'numeric',\n          minute: 'numeric',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          month: 'short',\n          day: '2-digit',\n          hour: 'numeric',\n          minute: 'numeric',\n        }).format(date),\n      };\n    case 'day':\n      return {\n        label: getFormatter(locale, {\n          day: '2-digit',\n          weekday: 'short',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          day: '2-digit',\n          weekday: 'short',\n          month: 'short',\n        }).format(date),\n      };\n    case 'week':\n      return {\n        label: getFormatter(locale, {\n          month: 'short',\n          day: '2-digit',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          day: '2-digit',\n          month: 'long',\n          year: 'numeric',\n        }).formatRange(date, endDate as Date),\n      };\n    case 'month':\n      return {\n        label: getFormatter(locale, {\n          month: 'short',\n          year: 'numeric',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          month: 'long',\n          year: 'numeric',\n        }).format(date),\n      };\n    case 'year':\n      return {\n        label: getFormatter(locale, {\n          year: 'numeric',\n        }).format(date),\n        tooltipTitle: getFormatter(locale, {\n          year: 'numeric',\n        }).format(date),\n      };\n  }\n}\n\nconst getFormatter = memoize(\n  (locale, options: Intl.DateTimeFormatOptions) => {\n    return new DateFormatter(locale, options);\n  },\n  {\n    equals: (a, b) => {\n      return shallowEqual(a, b);\n    },\n    callTimeout: undefined as any,\n  },\n);\n","import {getBootstrapData} from '@ui/bootstrap-data/bootstrap-data-store';\n\nconst primaryColor = getBootstrapData().themes[0].values['--be-primary'];\nexport const ChartColors = [\n  [\n    `rgb(${primaryColor.replaceAll(' ', ',')})`,\n    `rgba(${primaryColor.replaceAll(' ', ',')},0.2)`,\n  ],\n  ['rgb(255,112,67)', 'rgb(255,112,67,0.2)'],\n  ['rgb(255,167,38)', 'rgb(255,167,38,0.2)'],\n  ['rgb(141,110,99)', 'rgb(141,110,99,0.2)'],\n  ['rgb(102,187,106)', 'rgba(102,187,106,0.2)'],\n  ['rgb(92,107,192)', 'rgb(92,107,192,0.2)'],\n];\n","import {BaseChart, BaseChartProps} from './base-chart';\nimport {DatasetItem, ReportMetric} from '../admin/analytics/report-metric';\nimport {useMemo} from 'react';\nimport {formatReportData} from './data/format-report-data';\nimport {useSelectedLocale} from '@ui/i18n/selected-locale';\nimport {ChartData, ChartOptions} from 'chart.js';\nimport {ChartColors} from './chart-colors';\nimport {FormattedDatasetItem} from './data/formatted-dataset-item';\n\nconst LineChartOptions: ChartOptions<'line'> = {\n  parsing: {\n    xAxisKey: 'label',\n    yAxisKey: 'value',\n  },\n  datasets: {\n    line: {\n      fill: 'origin',\n      tension: 0.1,\n      pointBorderWidth: 4,\n      pointHitRadius: 10,\n    },\n  },\n  plugins: {\n    tooltip: {\n      intersect: false,\n      mode: 'index',\n    },\n  },\n};\n\ninterface LineChartProps extends Omit<BaseChartProps<'line'>, 'type' | 'data'> {\n  data?: ReportMetric<DatasetItem>;\n}\nexport function LineChart({data, ...props}: LineChartProps) {\n  const {localeCode} = useSelectedLocale();\n  const formattedData: ChartData<'line', FormattedDatasetItem[]> =\n    useMemo(() => {\n      const formattedData = formatReportData(data, {localeCode});\n      formattedData.datasets = formattedData.datasets.map((dataset, i) => ({\n        ...dataset,\n        backgroundColor: ChartColors[i][1],\n        borderColor: ChartColors[i][0],\n        pointBackgroundColor: ChartColors[i][0],\n      }));\n      return formattedData;\n    }, [data, localeCode]);\n\n  return (\n    <BaseChart\n      {...props}\n      data={formattedData}\n      type=\"line\"\n      options={LineChartOptions}\n    />\n  );\n}\n","import {BaseChart, BaseChartProps} from './base-chart';\nimport {ChartData, ChartOptions} from 'chart.js';\nimport {ChartColors} from './chart-colors';\nimport {useSelectedLocale} from '@ui/i18n/selected-locale';\nimport {useMemo} from 'react';\nimport {formatReportData} from './data/format-report-data';\nimport {DatasetItem, ReportMetric} from '../admin/analytics/report-metric';\nimport {FormattedDatasetItem} from './data/formatted-dataset-item';\n\nconst PolarAreaChartOptions: ChartOptions<'polarArea'> = {\n  parsing: {\n    key: 'value',\n  },\n  plugins: {\n    tooltip: {\n      intersect: true,\n    },\n  },\n};\n\ninterface PolarAreaChartProps\n  extends Omit<BaseChartProps<'polarArea'>, 'type' | 'data'> {\n  data?: ReportMetric<DatasetItem>;\n}\nexport function PolarAreaChart({\n  data,\n  className,\n  ...props\n}: PolarAreaChartProps) {\n  const {localeCode} = useSelectedLocale();\n  const formattedData: ChartData<'polarArea', FormattedDatasetItem[]> =\n    useMemo(() => {\n      const formattedData = formatReportData(data, {localeCode});\n      formattedData.labels = formattedData.datasets[0]?.data.map(d => d.label);\n      formattedData.datasets = formattedData.datasets.map((dataset, i) => ({\n        ...dataset,\n        backgroundColor: ChartColors.map(c => c[1]),\n        borderColor: ChartColors.map(c => c[0]),\n        borderWidth: 2,\n      }));\n      return formattedData;\n    }, [data, localeCode]);\n\n  return (\n    <BaseChart\n      type=\"polarArea\"\n      data={formattedData}\n      options={PolarAreaChartOptions}\n      className={className}\n      {...props}\n    />\n  );\n}\n","import lazyLoader from '@ui/utils/loaders/lazy-loader';\nimport {useSettings} from '@ui/settings/use-settings';\nimport {RefObject, useCallback, useEffect, useRef} from 'react';\nimport {useThemeSelector} from '@ui/themes/theme-selector-context';\nimport {themeValueToHex} from '@ui/themes/utils/theme-value-to-hex';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {message} from '@ui/i18n/message';\nimport {LocationDatasetItem} from '@common/admin/analytics/report-metric';\n\nconst loaderUrl = 'https://www.gstatic.com/charts/loader.js';\n\ninterface UseGoogleGeoChartProps {\n  placeholderRef: RefObject<HTMLDivElement>;\n  data: LocationDatasetItem[];\n  onCountrySelected?: (countryCode: string) => void;\n  country?: string;\n}\nexport function useGoogleGeoChart({\n  placeholderRef,\n  data,\n  country,\n  onCountrySelected,\n}: UseGoogleGeoChartProps) {\n  const {trans} = useTrans();\n  const {analytics} = useSettings();\n  const apiKey = analytics?.gchart_api_key;\n  const {selectedTheme} = useThemeSelector();\n  const geoChartRef = useRef<google.visualization.GeoChart>();\n  // only allow selecting countries, not cities\n  const regionInteractivity = !!onCountrySelected && !country;\n  const drawGoogleChart = useCallback(() => {\n    if (typeof google === 'undefined') return;\n\n    const seedData = data.map(location => [location.label, location.value]);\n    seedData.unshift([\n      country ? trans(message('City')) : trans(message('Country')),\n      trans(message('Clicks')),\n    ]);\n\n    const backgroundColor = `${themeValueToHex(\n      selectedTheme.values['--be-paper'],\n    )}`;\n    const chartColor = `${themeValueToHex(\n      selectedTheme.values['--be-primary'],\n    )}`;\n\n    const options: google.visualization.GeoChartOptions = {\n      colorAxis: {colors: [chartColor]},\n      backgroundColor,\n      region: country ? country.toUpperCase() : undefined,\n      resolution: country ? 'provinces' : 'countries',\n      displayMode: country ? 'markers' : 'regions',\n      enableRegionInteractivity: regionInteractivity,\n    };\n\n    if (\n      !geoChartRef.current &&\n      placeholderRef.current &&\n      google?.visualization?.GeoChart\n    ) {\n      geoChartRef.current = new google.visualization.GeoChart(\n        placeholderRef.current,\n      );\n    }\n    geoChartRef.current?.draw(\n      google.visualization.arrayToDataTable(seedData),\n      options,\n    );\n  }, [\n    selectedTheme,\n    data,\n    placeholderRef,\n    trans,\n    country,\n    regionInteractivity,\n  ]);\n\n  const initGoogleGeoChart = useCallback(async () => {\n    if (lazyLoader.isLoadingOrLoaded(loaderUrl)) return;\n    await lazyLoader.loadAsset(loaderUrl, {type: 'js', id: 'google-charts-js'});\n    await google.charts.load('current', {\n      packages: ['geochart'],\n      mapsApiKey: apiKey,\n    });\n    drawGoogleChart();\n  }, [apiKey, drawGoogleChart]);\n\n  useEffect(() => {\n    if (geoChartRef.current && onCountrySelected) {\n      google.visualization.events.addListener(\n        geoChartRef.current,\n        'regionClick',\n        (a: {region: string}) => onCountrySelected?.(a.region),\n      );\n    }\n\n    return () => {\n      if (geoChartRef.current) {\n        google.visualization.events.removeAllListeners(geoChartRef.current);\n      }\n    };\n    // this will correctly run when geochart instance is set on ref\n  }, [onCountrySelected, geoChartRef.current]);\n\n  // on component load: load chart library then draw, otherwise just draw\n  useEffect(() => {\n    initGoogleGeoChart();\n  }, [initGoogleGeoChart]);\n\n  // redraw chart if data or theme changes\n  useEffect(() => {\n    drawGoogleChart();\n  }, [selectedTheme, drawGoogleChart, data]);\n\n  return {drawGoogleChart};\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowBackIcon = createSvgIcon(\n  <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\n, 'ArrowBackOutlined');\n","import {createSvgIcon} from '@ui/icons/create-svg-icon';\n\nexport const InfoDialogTriggerIcon = createSvgIcon(\n  <path d=\"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\" />,\n  'InfoDialogTrigger',\n);\n","import {IconButton} from '@ui/buttons/icon-button';\nimport {InfoDialogTriggerIcon} from '@ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger-icon';\nimport {Dialog, DialogSize} from '@ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport React, {ReactNode} from 'react';\nimport clsx from 'clsx';\n\ninterface Props {\n  title?: ReactNode;\n  body: ReactNode;\n  dialogSize?: DialogSize;\n  className?: string;\n}\nexport function InfoDialogTrigger({\n  title,\n  body,\n  dialogSize = 'sm',\n  className,\n}: Props) {\n  return (\n    <DialogTrigger type=\"popover\" triggerOnHover>\n      <IconButton\n        className={clsx('ml-4 text-muted opacity-70', className)}\n        iconSize=\"xs\"\n        size=\"2xs\"\n      >\n        <InfoDialogTriggerIcon viewBox=\"0 0 16 16\" />\n      </IconButton>\n      <Dialog size={dialogSize}>\n        {title && (\n          <DialogHeader padding=\"px-18 pt-12\" size=\"md\" hideDismissButton>\n            {title}\n          </DialogHeader>\n        )}\n        <DialogBody>{body}</DialogBody>\n      </Dialog>\n    </DialogTrigger>\n  );\n}\n","import {useSelectedLocale} from '@ui/i18n/selected-locale';\nimport {Fragment, memo} from 'react';\n\ninterface Props {\n  code: string;\n}\nexport const FormattedCountryName = memo(({code: countryCode}: Props) => {\n  const {localeCode} = useSelectedLocale();\n  const regionNames = new Intl.DisplayNames([localeCode], {type: 'region'});\n  let formattedName: string | undefined;\n\n  try {\n    formattedName = regionNames.of(countryCode.toUpperCase());\n  } catch (e) {}\n\n  return <Fragment>{formattedName}</Fragment>;\n});\n","import {\n  LocationDatasetItem,\n  ReportMetric,\n} from '@common/admin/analytics/report-metric';\nimport React, {useMemo, useRef} from 'react';\nimport {useGoogleGeoChart} from './use-google-geo-chart';\nimport {ChartLayout, ChartLayoutProps} from '@common/charts/chart-layout';\nimport {ChartLoadingIndicator} from '@common/charts/chart-loading-indicator';\nimport {Button} from '@ui/buttons/button';\nimport {ArrowBackIcon} from '@ui/icons/material/ArrowBack';\nimport clsx from 'clsx';\nimport {InfoDialogTrigger} from '@ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\nimport {Trans} from '@ui/i18n/trans';\nimport {FormattedCountryName} from '@ui/i18n/formatted-country-name';\n\ninterface GeoChartData extends Partial<ChartLayoutProps> {\n  data?: ReportMetric<LocationDatasetItem>;\n  onCountrySelected?: (countryCode: string | undefined) => void;\n  country?: string;\n  colSpan?: string;\n  rowSpan?: string;\n}\nexport function GeoChart({\n  data: metricData,\n  isLoading,\n  onCountrySelected,\n  country,\n  className,\n  colSpan = 'col-span-7',\n  rowSpan = 'row-span-11',\n  ...layoutProps\n}: GeoChartData) {\n  const placeholderRef = useRef<HTMLDivElement>(null);\n  const regionInteractivity = !!onCountrySelected;\n\n  // memo data to avoid redrawing chart on rerender\n  const initialData = metricData?.datasets[0].data;\n  const data = useMemo(() => {\n    return initialData || [];\n  }, [initialData]);\n  useGoogleGeoChart({placeholderRef, data, country, onCountrySelected});\n\n  return (\n    <ChartLayout\n      {...layoutProps}\n      className={clsx(\n        className,\n        colSpan,\n        rowSpan,\n        'compact-scrollbar overflow-x-auto overflow-y-hidden',\n      )}\n      title={\n        <div className=\"flex items-center\">\n          <Trans message=\"Top Locations\" />\n          {country ? (\n            <span className=\"pl-4\">\n              ({<FormattedCountryName code={country} />})\n            </span>\n          ) : null}\n          {regionInteractivity && <InfoTrigger />}\n        </div>\n      }\n      contentIsFlex={isLoading}\n    >\n      {isLoading && <ChartLoadingIndicator />}\n      <div className=\"flex gap-24\">\n        <div\n          ref={placeholderRef}\n          className=\"min-h-[340px] w-[480px] flex-auto\"\n        />\n        <div className=\"w-[170px]\">\n          <div className=\"max-h-[340px] w-full flex-initial overflow-y-auto text-sm\">\n            {data.map(location => (\n              <div\n                key={location.label}\n                className={clsx(\n                  'mb-4 flex items-center gap-4',\n                  regionInteractivity && 'cursor-pointer hover:underline',\n                )}\n                role={regionInteractivity ? 'button' : undefined}\n                onClick={() => {\n                  onCountrySelected?.(location.code);\n                }}\n              >\n                <div className=\"max-w-110 overflow-hidden overflow-ellipsis whitespace-nowrap\">\n                  {location.label}\n                </div>\n                <div>({location.percentage})%</div>\n              </div>\n            ))}\n          </div>\n          {country && (\n            <Button\n              variant=\"outline\"\n              size=\"xs\"\n              className=\"mt-14\"\n              startIcon={<ArrowBackIcon />}\n              onClick={() => {\n                onCountrySelected?.(undefined);\n              }}\n            >\n              <Trans message=\"Back to countries\" />\n            </Button>\n          )}\n        </div>\n      </div>\n    </ChartLayout>\n  );\n}\n\nfunction InfoTrigger() {\n  return (\n    <InfoDialogTrigger\n      title={<Trans message=\"Zooming in\" />}\n      body={\n        <Trans message=\"Click on a country inside the map or country list to zoom in and see city data for that country.\" />\n      }\n    />\n  );\n}\n"],"file":"assets/geo-chart-dd0fea1d.js"}