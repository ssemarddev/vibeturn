import{r as n,j as s,z as b,aa as F,aw as T,k as C,as as w,T as c,bq as N,h as A,$ as S,a0 as p,a1 as v,ay as z,bI as D}from"./main-41809f72.js";import{T as k}from"./TrendingUp-3a0460e6.js";import{a as h,F as E}from"./theme-value-to-hex-3be344f1.js";import{k as I,l as d,B as P,L as R,P as B,G as V}from"./geo-chart-dd0fea1d.js";const q=n.memo(({bytes:e})=>s.jsx(n.Fragment,{children:b(e)})),y="admin/reports";function X(e={}){return F({queryKey:[y,e],queryFn:()=>K(e),placeholderData:T})}function K({types:e,dateRange:a}){const t={};return e&&(t.types=e.join(",")),a&&(t.startDate=a.start.toAbsoluteString(),t.endDate=a.end.toAbsoluteString(),t.timezone=a.start.timeZone),C.get(y,{params:t}).then(i=>i.data)}const L=w(s.jsx("path",{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6h-6z"}),"TrendingDownOutlined"),M=w(s.jsx("path",{d:"m22 12-4-4v3H3v2h15v3l4-4z"}),"TrendingFlatOutlined");function Y({report:e,isLoading:a}){return e?s.jsx(n.Fragment,{children:e==null?void 0:e.map(t=>s.jsx(G,{icon:t.icon,type:t.type,currentValue:t.currentValue,previousValue:t.previousValue,percentageChange:t.percentageChange,isLoading:a,children:s.jsx(c,{message:t.name})},t.name))}):s.jsx("div",{className:"col-span-12 row-span-3"})}function G({icon:e,children:a,type:t,currentValue:i,previousValue:m,percentageChange:r,isLoading:x=!1,colSpan:o="col-span-3",rowSpan:u="row-span-3"}){let l;if(e)if(n.isValidElement(e))l=n.cloneElement(e,{size:"sm"});else{const j=N(e);l=s.jsx(j,{size:"sm"})}return s.jsxs("div",{className:A("compact-scrollbar flex flex-col justify-between overflow-x-auto overflow-y-hidden whitespace-nowrap rounded-panel border px-20 py-14",o,u),children:[s.jsxs("div",{className:"flex items-center gap-6",children:[l,s.jsx("h2",{className:"text-sm font-semibold",children:a})]}),s.jsxs("div",{className:"flex gap-10",children:[s.jsx("div",{className:"text-4xl font-medium text-main",children:s.jsx(S,{initial:!1,mode:"wait",children:x?s.jsx(p.div,{...v,children:s.jsx(z,{className:"min-w-40"})},"skeleton"):s.jsx(p.div,{...v,children:s.jsx(H,{type:t,value:i})},"value")})}),i!=null&&(r!=null||m!=null)&&s.jsx("div",{className:"flex items-center gap-10",children:s.jsx(O,{currentValue:i,previousValue:m,percentageChange:r})})]})]})}function H({type:e,value:a}){if(a==null)return"â€”";switch(e){case"fileSize":return s.jsx(q,{bytes:a});case"percentage":return s.jsx(h,{value:a,style:"percent",maximumFractionDigits:1});case"durationInSeconds":return s.jsx(E,{seconds:a,verbose:!0});default:return s.jsx(h,{value:a})}}function O(e){const a=Q(e);let t;return a>0?t=s.jsx(k,{size:"md",className:"text-positive"}):a===0?t=s.jsx(M,{className:"text-muted"}):t=s.jsx(L,{className:"text-danger"}),s.jsxs(n.Fragment,{children:[t,s.jsxs("div",{className:"text-sm font-semibold text-muted",children:[a,"%"]})]})}function Q({percentageChange:e,previousValue:a,currentValue:t}){return e!=null||a==null||t==null?e??0:a===0?100:Math.round((t-a)/a*100)}function U({data:e,direction:a="vertical",individualBarColors:t=!1,className:i,...m}){const{localeCode:r}=D(),x=n.useMemo(()=>{const l=I(e,{localeCode:r});return l.datasets=l.datasets.map((j,g)=>({...j,backgroundColor:t?d.map(f=>f[1]):d[g][1],borderColor:t?d.map(f=>f[0]):d[g][0],borderWidth:2})),l},[e,r,t]),o=a==="horizontal",u=n.useMemo(()=>({indexAxis:o?"y":"x",parsing:{xAxisKey:o?"value":"label",yAxisKey:o?"label":"value"}}),[o]);return s.jsx(P,{type:"bar",className:i,data:x,options:u,...m})}function _({report:e,isLoading:a}){const t=e==null?void 0:e.pageViews.total;return s.jsxs(n.Fragment,{children:[s.jsx(R,{colSpan:"col-span-8",isLoading:a,data:e==null?void 0:e.pageViews,title:s.jsx(c,{message:"Pageviews"}),description:t?s.jsx(c,{message:":count total views",values:{count:s.jsx(h,{value:t})}}):null}),s.jsx(B,{colSpan:"col-span-4",isLoading:a,data:e==null?void 0:e.devices,title:s.jsx(c,{message:"Top devices"})}),s.jsx(V,{colSpan:"col-span-7",isLoading:a,data:e==null?void 0:e.locations,title:s.jsx(c,{message:"Top locations"})}),s.jsx(U,{colSpan:"col-span-5",isLoading:a,data:e==null?void 0:e.browsers,direction:"horizontal",individualBarColors:!0,hideLegend:!0,title:s.jsx(c,{message:"Top browsers"})})]})}export{Y as A,q as F,L as T,_ as V,M as a,X as u};
//# sourceMappingURL=visitors-report-charts-65ad76da.js.map
