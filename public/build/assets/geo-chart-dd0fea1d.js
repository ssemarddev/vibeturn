import{R as De,j as r,h as D,bh as We,cY as Ye,cZ as ce,cM as $e,r as m,as as W,bI as S,c_ as qe,c$ as Qe,d0 as Ce,d1 as Je,d2 as U,a0 as Ve,cN as A,d3 as O,C as ae,aH as Xe,d4 as E,an as Y,cK as se,cb as et,aF as tt,cf as at,cg as st,bc as Ne,d5 as rt,bU as Pe,d6 as nt,d7 as ot,d8 as it,d9 as ct,ab as Re,x as j,da as lt,db as le,dc as de,bT as dt,dd as Q,de as J,cL as _,u as Ie,ce as Te,df as ze,cO as ut,c3 as Le,c4 as Se,T,ad as ft,am as mt,B as Z,af as Ae,ag as Fe,$ as ht,a9 as Me,a2 as pt,aZ as xt,b4 as bt,dg as gt,bQ as ue,ak as yt,aD as vt,aI as fe,al as jt}from"./main-41809f72.js";import{K as wt,g as kt,c as Dt,u as $t,S as Ct,t as me}from"./theme-value-to-hex-3be344f1.js";const Vt=De.forwardRef((e,a)=>{const{children:t,inputProps:s,wrapperProps:n,className:o,autoFocus:i,style:c,onClick:l}=e;return r.jsx("div",{...n,onClick:l,children:r.jsx("div",{...s,role:"group",className:D(o,"flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60"),ref:a,style:c,children:r.jsx(We,{autoFocus:i,children:t})})})});function Nt(e){return e instanceof Ye?"day":"minute"}function re(e,a,t){return a!=null&&e.compare(a)<0||t!=null&&e.compare(t)>0}function F(e,a,t){try{return ce(e,a,t)}catch{return ce(e,"UTC",t)}}function Pt(e,a){const t=$e(),s=a.timezone??t,[n,o]=m.useState(!1),i=a.closeDialogOnSelection??!0,c=a.granularity||Nt(e),l=a.min?F(a.min,s):void 0,f=a.max?F(a.max,s):void 0;return{timezone:s,granularity:c,min:l,max:f,calendarIsOpen:n,setCalendarIsOpen:o,closeDialogOnSelection:i}}const Rt=W(r.jsx("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined");function It({date:e,currentMonth:a,state:{dayIsActive:t,dayIsHighlighted:s,dayIsRangeStart:n,dayIsRangeEnd:o,getCellProps:i,timezone:c,min:l,max:f}}){const{localeCode:h}=S(),d=qe(e,h),p=t(e),g=s(e),w=n(e),v=o(e),z=Qe(e,c),k=Ce(e,a),$=re(e,l,f);return r.jsxs("div",{role:"button","aria-disabled":$,className:D("relative isolate h-40 w-40 flex-shrink-0 text-sm",$&&"pointer-events-none text-disabled",!k&&"pointer-events-none invisible"),...i(e,k),children:[r.jsx("span",{className:D("absolute inset-0 z-10 flex h-full w-full cursor-pointer select-none items-center justify-center rounded-full",!p&&!z&&"hover:bg-hover",p&&"bg-primary font-semibold text-on-primary",z&&!p&&"bg-chip"),children:e.day}),g&&k&&r.jsx("span",{className:D("absolute inset-0 h-full w-full bg-primary/focus",(w||d===0||e.day===1)&&"rounded-l-full",(v||d===6||e.day===a.calendar.getDaysInMonth(a))&&"rounded-r-full")})]})}function Tt({startDate:e,state:a,isFirst:t,isLast:s}){const{localeCode:n}=S(),o=Je(e,n),i=U(e,n);return r.jsxs("div",{className:"w-280 flex-shrink-0",children:[r.jsx(zt,{isFirst:t,isLast:s,state:a,currentMonth:e}),r.jsxs("div",{className:"block",role:"grid",children:[r.jsx(Lt,{state:a,startDate:e}),[...new Array(o).keys()].map(c=>r.jsx(Ve.div,{className:"mb-6 flex",children:[...new Array(7).keys()].map(l=>r.jsx(It,{date:i.add({weeks:c,days:l}),currentMonth:e,state:a},l))},c))]})]})}function zt({currentMonth:e,isFirst:a,isLast:t,state:{calendarDates:s,setCalendarDates:n,timezone:o,min:i,max:c}}){const l=p=>{const g=s.length;let w;p==="forward"?w=s.map(v=>E(v.add({months:g}))):w=s.map(v=>E(v.subtract({months:g}))),n(w)},f=A({month:"long",year:"numeric",era:e.calendar.identifier!=="gregory"?"long":void 0,calendar:e.calendar.identifier}),h=re(e.subtract({days:1}),i,c),d=re(O(e.add({months:1})),i,c);return r.jsxs("div",{className:"flex items-center justify-between gap-10",children:[r.jsx(ae,{size:"md",className:D("text-muted",!a&&"invisible"),disabled:!a||h,"aria-hidden":!a,onClick:()=>{l("backward")},children:r.jsx(Xe,{})}),r.jsx("div",{className:"select-none text-sm font-semibold",children:f.format(e.toDate(o))}),r.jsx(ae,{size:"md",className:D("text-muted",!t&&"invisible"),disabled:!t||d,"aria-hidden":!t,onClick:()=>{l("forward")},children:r.jsx(wt,{})})]})}function Lt({state:{timezone:e},startDate:a}){const{localeCode:t}=S(),s=A({weekday:"short"}),n=U(a,t);return r.jsx("div",{className:"flex",children:[...new Array(7).keys()].map(o=>{const c=n.add({days:o}).toDate(e),l=s.format(c);return r.jsx("div",{className:"relative h-40 w-40 flex-shrink-0 text-sm font-semibold",children:r.jsx("div",{className:"absolute flex h-full w-full select-none items-center justify-center",children:l})},o)})})}function St({state:e,visibleMonths:a=1}){return Y()&&(a=1),r.jsx(m.Fragment,{children:[...new Array(a).keys()].map(s=>{const n=se(O(e.calendarDates[s])),o=s===0,i=s===a-1;return r.jsx(Tt,{state:e,startDate:n,isFirst:o,isLast:i},s)})})}const At=De.forwardRef(({inputRef:e,wrapperProps:a,children:t,onBlur:s,...n},o)=>{const i=et(n),c=tt(o),{fieldProps:l,inputProps:f}=at({...n,focusRef:c,labelElementType:"span"});return i.wrapper=D(i.wrapper,n.disabled&&"pointer-events-none"),r.jsx(st,{wrapperProps:Ne(a,{onBlur:h=>{var d;(d=c.current)!=null&&d.contains(h.relatedTarget)||s==null||s(h)},onClick:()=>{const h=rt(c);h==null||h.focusFirst()}}),fieldClassNames:i,ref:c,...l,children:r.jsx(Vt,{inputProps:f,className:D(i.input,"gap-10"),ref:e,children:t})})});function Ft(e,a,t,s){switch(a){case"era":case"year":case"month":case"day":return e.cycle(a,t,{round:a==="year"})}if("hour"in e)switch(a){case"dayPeriod":{const n=e.hour,o=n>=12;return e.set({hour:o?n-12:n+12})}case"hour":case"minute":case"second":return e.cycle(a,t,{round:a!=="hour",hourCycle:s.hour12?12:24})}return e}function Mt(e,a,t,s){switch(a){case"day":case"month":case"year":return e.set({[a]:t})}if("hour"in e)switch(a){case"dayPeriod":{const n=e.hour,o=n>=12;return t>=12===o?e:e.set({hour:o?n-12:n+12})}case"hour":if(s.hour12){const o=e.hour>=12;!o&&t===12&&(t=0),o&&t<12&&(t+=12)}case"minute":case"second":return e.set({[a]:t})}return e}const he={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function Ht({segment:e,domProps:a,value:t,onChange:s,isPlaceholder:n,state:{timezone:o,calendarIsOpen:i,setCalendarIsOpen:c}}){const l=Y(),f=m.useRef(""),{localeCode:h}=S(),d=Pe(),p=A({timeZone:o}),g=m.useMemo(()=>new nt(h,{maximumFractionDigits:0}),[h]),w=u=>{s(Mt(t,e.type,u,p.resolvedOptions()))},v=u=>{s(Ft(t,e.type,u,p.resolvedOptions()))},z=()=>{if(g.isValidPartialNumber(e.text)){const u=e.text.slice(0,-1),y=g.parse(u);if(u.length===0||y===0){const C=ot(o);e.type in C&&w(C[e.type])}else w(y);f.current=u}else e.type==="dayPeriod"&&v(-1)},k=u=>{var y;if(!(u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)){switch(u.key){case"ArrowLeft":u.preventDefault(),u.stopPropagation(),d==null||d.focusPrevious();break;case"ArrowRight":u.preventDefault(),u.stopPropagation(),d==null||d.focusNext();break;case"Enter":(y=u.target.closest("form"))==null||y.requestSubmit(),c(!i);break;case"Tab":break;case"Backspace":case"Delete":{u.preventDefault(),u.stopPropagation(),z();break}case"ArrowUp":u.preventDefault(),f.current="",v(1);break;case"ArrowDown":u.preventDefault(),f.current="",v(-1);break;case"PageUp":u.preventDefault(),f.current="",v(he[e.type]||1);break;case"PageDown":u.preventDefault(),f.current="",v(-(he[e.type]||1));break;case"Home":u.preventDefault(),f.current="",w(e.maxValue);break;case"End":u.preventDefault(),f.current="",w(e.minValue);break}q(u.key)}},$=A({hour:"numeric",hour12:!0}),P=m.useMemo(()=>{const u=new Date;return u.setHours(0),$.formatToParts(u).find(y=>y.type==="dayPeriod").value},[$]),M=m.useMemo(()=>{const u=new Date;return u.setHours(12),$.formatToParts(u).find(y=>y.type==="dayPeriod").value},[$]),q=u=>{const y=f.current+u;switch(e.type){case"dayPeriod":if(P.toLowerCase().startsWith(u))w(0);else if(M.toLowerCase().startsWith(u))w(12);else break;d==null||d.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!g.isValidPartialNumber(y))return;let C=g.parse(y),L=C,K=e.minValue===0;if(e.type==="hour"&&p.resolvedOptions().hour12){switch(p.resolvedOptions().hourCycle){case"h11":C>11&&(L=g.parse(u));break;case"h12":K=!1,C>12&&(L=g.parse(u));break}e.value>=12&&C>1&&(C+=12)}else C>e.maxValue&&(L=g.parse(u));if(Number.isNaN(C))return;const G=L!==0||K;G&&w(L),+`${C}0`>e.maxValue||y.length>=String(e.maxValue).length?(f.current="",G&&(d==null||d.focusNext())):f.current=y;break}}},B=l?{}:{"aria-label":e.type,"aria-valuetext":n?void 0:`${e.value}`,"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":n?void 0:e.value,tabIndex:0,onKeyDown:k};return r.jsx("div",{...Ne(a,{...B,onFocus:u=>{f.current="",u.target.scrollIntoView({block:"nearest"})},onClick:u=>{u.preventDefault(),u.stopPropagation()}}),className:"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary",children:e.text.padStart(e.minLength,"0")})}function Ot({segment:e,domProps:a}){const t=Pe();return r.jsx("div",{...a,onPointerDown:s=>{s.pointerType==="mouse"&&(s.preventDefault(),t!=null&&t.focusNext({from:s.target})||t==null||t.focusPrevious({from:s.target}))},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:e.text})}function Et(e,a,t){switch(a){case"year":return{value:e.year,placeholder:"yyyy",minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,placeholder:"mm",minValue:ct(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:it(e),maxValue:e.calendar.getDaysInMonth(e),placeholder:"dd"}}if("hour"in e)switch(a){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(t.hour12){const s=e.hour>=12;return{value:e.hour,minValue:s?12:0,maxValue:s?23:11,placeholder:"--"}}return{value:e.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:e.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}function pe({segmentProps:e,state:a,value:t,onChange:s,isPlaceholder:n}){const{granularity:o,timezone:i}=a,c=m.useMemo(()=>{const d={year:"numeric",month:"numeric",day:"numeric",timeZone:i};return o==="minute"&&(d.hour="numeric",d.minute="numeric"),d},[o,i]),l=A(c),f=m.useMemo(()=>t.toDate(),[t]),h=m.useMemo(()=>l.formatToParts(f).map(d=>{const p=Et(t,d.type,l.resolvedOptions()),g=n&&d.type!=="literal"?p.placeholder:d.value;return{type:d.type,text:d.value===", "?" ":g,...p,minLength:d.type!=="literal"?String(p.maxValue).length:1}}),[f,l,n,t]);return r.jsx("div",{className:"flex items-center",children:h.map((d,p)=>d.type==="literal"?r.jsx(Ot,{domProps:e,segment:d},p):r.jsx(Ht,{isPlaceholder:n,domProps:e,state:a,value:t,onChange:s,segment:d},p))})}function He(e){return e.set({hour:0,minute:0,second:0,millisecond:0})}function I(e){return e.set({hour:24-1,minute:60-1,second:60-1,millisecond:1e3-1})}const b=He(kt());var we,ke;const X=((ke=(we=Re())==null?void 0:we.i18n)==null?void 0:ke.language)||"en",Bt=[{key:0,label:j("Today"),getRangeValue:()=>({preset:0,start:b,end:I(b)})},{key:1,label:j("Yesterday"),getRangeValue:()=>({preset:1,start:b.subtract({days:1}),end:I(b).subtract({days:1})})},{key:2,label:j("This week"),getRangeValue:()=>({preset:2,start:U(b,X),end:lt(I(b),X)})},{key:3,label:j("Last week"),getRangeValue:()=>{const e=U(b,X).subtract({days:7});return{preset:3,start:e,end:e.add({days:6})}}},{key:4,label:j("Last 7 days"),getRangeValue:()=>({preset:4,start:b.subtract({days:7}),end:I(b)})},{key:5,label:j("Last 30 days"),getRangeValue:()=>({preset:5,start:b.subtract({days:30}),end:I(b)})},{key:6,label:j("Last 3 months"),getRangeValue:()=>({preset:6,start:b.subtract({months:3}),end:I(b)})},{key:7,label:j("Last 12 months"),getRangeValue:()=>({preset:7,start:b.subtract({months:12}),end:I(b)})},{key:8,label:j("This month"),getRangeValue:()=>({preset:8,start:O(b),end:E(I(b))})},{key:9,label:j("This year"),getRangeValue:()=>({preset:9,start:le(b),end:de(I(b))})},{key:10,label:j("Last year"),getRangeValue:()=>({preset:10,start:le(b).subtract({years:1}),end:de(I(b)).subtract({years:1})})}];function xe(e){var oe,ie;const a=Dt(),[t,s]=m.useState({start:(!e.value||!e.value.start)&&!((oe=e.defaultValue)!=null&&oe.start),end:(!e.value||!e.value.end)&&!((ie=e.defaultValue)!=null&&ie.end)}),n=e.onChange,[o,i]=dt(e.value?te(e.value,a):void 0,e.value?void 0:te(e.defaultValue,a),x=>{s({start:!1,end:!1}),n==null||n(x)}),{min:c,max:l,granularity:f,timezone:h,calendarIsOpen:d,setCalendarIsOpen:p,closeDialogOnSelection:g}=Pt(o.start,e),w=m.useCallback(()=>{s({start:!0,end:!0}),i(te(null,a)),n==null||n(null),p(!1)},[a,i,n,p]),[v,z]=m.useState(null),[k,$]=m.useState(!1),[P,M]=m.useState(o),[q,B]=m.useState(()=>be(o,l)),u=m.useCallback(x=>{let V=x.start,N=x.end;c&&(V=Q(V,c));const Ue=l?J(l,N):N;V=J(V,Ue);const Ze=c?Q(c,V):V;return N=Q(N,Ze),l&&(N=J(N,l)),{start:F(V,h),end:F(N,h)}},[c,l,h]),y=m.useCallback(x=>{const V={...u(x),preset:x.preset};i(V),M(V),B(be(V,l)),s({start:!1,end:!1})},[i,u,l]),C=m.useCallback(x=>!t.start&&_(x,P.start)||!t.end&&_(x,P.end),[P,t]),L=m.useCallback(x=>(k||!t.start&&!t.end)&&x.compare(P.start)>=0&&x.compare(P.end)<=0,[P,t,k]),K=m.useCallback(x=>_(x,P.start),[P]),G=m.useCallback(x=>_(x,P.end),[P]),_e=m.useCallback((x,V)=>({onPointerEnter:()=>{k&&V&&M(ee({start:v,end:x,timezone:h}))},onClick:()=>{if(!k)$(!0),z(x),M(ee({start:x,end:x,timezone:h}));else{const N=ee({start:v,end:x,timezone:h});N.start=He(N.start),N.end=I(N.end),$(!1),z(null),y==null||y(N),g&&(p==null||p(!1))}}}),[v,k,y,p,g,h]);return{selectedValue:o,setSelectedValue:y,calendarIsOpen:d,setCalendarIsOpen:p,dayIsActive:C,dayIsHighlighted:L,dayIsRangeStart:K,dayIsRangeEnd:G,getCellProps:_e,calendarDates:q,setIsPlaceholder:s,isPlaceholder:t,clear:w,setCalendarDates:B,min:c,max:l,granularity:f,timezone:h,closeDialogOnSelection:g}}function be(e,a){let t=se(O(e.start)),s=se(E(e.end));return Ce(t,s)&&(s=E(s.add({months:1}))),a&&s.compare(a)>0&&(s=t,t=O(t.subtract({months:1}))),[t,s]}function ee(e){const a=F(e.start,e.timezone),t=F(e.end,e.timezone);return a.compare(t)>0?{start:t,end:a}:{start:a,end:t}}function te(e,a){return e!=null&&e.start&&(e!=null&&e.end)?e:!(e!=null&&e.start)&&(e!=null&&e.end)?(e.start=e.end.subtract({months:1}),e):!(e!=null&&e.end)&&(e!=null&&e.start)?(e.end=e.start.add({months:1}),e):{start:a,end:a.add({months:1})}}const Oe=m.memo(({start:e,end:a,options:t,preset:s,timezone:n})=>{const{dates:o}=Ie(),i=$e(),c=n||(t==null?void 0:t.timeZone)||i,l=A(t||Te[s||(o==null?void 0:o.format)]);if(!e||!a)return null;let f;try{f=l.formatRange(ge(e,c),ge(a,c))}catch{f=""}return r.jsx(m.Fragment,{children:f})},ze);function ge(e,a){return typeof e=="string"?ut(e,a).toDate():"toDate"in e?e.toDate(a):e}const Kt=W(r.jsx("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"}),"ArrowRightAltOutlined");function Gt({onPresetSelected:e,selectedValue:a}){return r.jsx(Le,{children:Bt.map(t=>r.jsx(Se,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(a==null?void 0:a.preset)===t.key,onSelected:()=>{const s=t.getRangeValue();e(s)},children:r.jsx(T,{...t.label})},t.key))})}const Ee=[{key:0,label:j("Preceding period"),getRangeValue:e=>{const a=e.start,n=(e.end.toDate().getTime()-a.toDate().getTime())/(1e3*60);return{preset:0,start:a.subtract({minutes:n}),end:a}}},{key:1,label:j("Same period last year"),getRangeValue:e=>({start:e.start.subtract({years:1}),end:e.end.subtract({years:1}),preset:1})},{key:2,label:j("Custom"),getRangeValue:e=>({start:e.start.subtract({weeks:1}),end:e.end.subtract({weeks:1}),preset:2})}];function _t({originalRangeValue:e,onPresetSelected:a,selectedValue:t}){return r.jsx(Le,{children:Ee.map(s=>r.jsx(Se,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(t==null?void 0:t.preset)===s.key,onSelected:()=>{const n=s.getRangeValue(e);a(n)},children:r.jsx(T,{...s.label})},s.key))})}function Ut({state:e,compareState:a,showInlineDatePickerField:t=!1,compareVisibleDefault:s=!1}){const n=$t(),{close:o}=ft(),i=m.useRef(e),c=e.isPlaceholder.start||e.isPlaceholder.end,[l,f]=m.useState(s),h=r.jsxs(mt,{dividerTop:!0,startAction:!c&&!n?r.jsx("div",{className:"text-xs",children:r.jsx(Oe,{start:e.selectedValue.start.toDate(),end:e.selectedValue.end.toDate(),options:{dateStyle:"medium"}})}):void 0,children:[r.jsx(Z,{variant:"text",size:"xs",onClick:()=>{e.setSelectedValue(i.current.selectedValue),e.setIsPlaceholder(i.current.isPlaceholder),o()},children:r.jsx(T,{message:"Cancel"})}),r.jsx(Z,{variant:"flat",color:"primary",size:"xs",onClick:()=>{const d=e.selectedValue;a&&l&&(d.compareStart=a.selectedValue.start,d.compareEnd=a.selectedValue.end),o(d)},children:r.jsx(T,{message:"Select"})})]});return r.jsxs(Ae,{size:"auto",children:[r.jsxs(Fe,{className:"flex",padding:"p-0",children:[!n&&r.jsxs("div",{className:"min-w-192 py-14",children:[r.jsx(Gt,{selectedValue:e.selectedValue,onPresetSelected:d=>{e.setSelectedValue(d),e.closeDialogOnSelection&&o(d)}}),!!a&&r.jsxs(m.Fragment,{children:[r.jsx(Ct,{className:"mx-20 mb-10 mt-14",checked:l,onChange:d=>f(d.target.checked),children:r.jsx(T,{message:"Compare"})}),l&&r.jsx(_t,{originalRangeValue:e.selectedValue,selectedValue:a.selectedValue,onPresetSelected:d=>{a.setSelectedValue(d)}})]})]}),r.jsx(ht,{initial:!1,children:r.jsx(Zt,{state:e,compareState:a,showInlineDatePickerField:t,compareVisible:l})})]}),!e.closeDialogOnSelection&&h]})}function Zt({state:e,compareState:a,showInlineDatePickerField:t,compareVisible:s}){return r.jsxs(Ve.div,{initial:{width:0,overflow:"hidden"},animate:{width:"auto"},exit:{width:0,overflow:"hidden"},transition:{type:"tween",duration:.125},className:"border-l px-20 pb-20 pt-10",children:[t&&r.jsxs("div",{children:[r.jsx(ye,{state:e}),!!a&&s&&r.jsx(ye,{state:a,label:r.jsx(T,{message:"Compare"})})]}),r.jsx("div",{className:"flex items-start gap-36",children:r.jsx(St,{state:e,visibleMonths:2})})]})}function ye({state:e,label:a}){const{selectedValue:t,setSelectedValue:s}=e;return r.jsxs(At,{className:"mb-20 mt-10",label:a,children:[r.jsx(pe,{state:e,value:t.start,onChange:n=>{s({...t,start:n})}}),r.jsx(Kt,{className:"block flex-shrink-0 text-muted",size:"md"}),r.jsx(pe,{state:e,value:t.end,onChange:n=>{s({...t,end:n})}})]})}const Wt={month:"short",day:"2-digit"};function la({value:e,onChange:a,disabled:t,compactOnMobile:s=!0,enableCompare:n=!1,granularity:o="minute"}){const i=Y();return r.jsxs(Me,{type:"popover",onClose:c=>{c&&a(c)},children:[r.jsx(Z,{variant:"outline",color:"chip",endIcon:r.jsx(Rt,{}),disabled:t,children:r.jsx(Oe,{start:e.start,end:e.end,options:i&&s?Wt:Te.short})}),r.jsx(Yt,{value:e,enableCompare:n,granularity:o})]})}function Yt({value:e,enableCompare:a,granularity:t}){const s=Y(),n=xe({granularity:t,defaultValue:{start:e.start,end:e.end,preset:e.preset},closeDialogOnSelection:!1}),o=!!e.compareStart&&!!e.compareEnd,i=xe({granularity:t,defaultValue:o?{start:e.compareStart,end:e.compareEnd,preset:e.comparePreset}:Ee[0].getRangeValue(n.selectedValue)});return r.jsx(Ut,{state:n,compareState:a?i:void 0,compareVisibleDefault:o,showInlineDatePickerField:!s})}function Be(e){const{title:a,description:t,children:s,className:n,contentIsFlex:o=!0,contentClassName:i,contentRef:c}=e;return r.jsxs("div",{className:D("flex h-full flex-auto flex-col rounded-panel border bg p-20 dark:bg-alt",n),children:[r.jsxs("div",{className:"flex flex-shrink-0 items-center justify-between pb-10 text-xs",children:[r.jsx("div",{className:"text-sm font-semibold",children:a}),t&&r.jsx("div",{className:"text-muted",children:t})]}),r.jsx("div",{ref:c,className:D("relative",o&&"flex flex-auto items-center justify-center",i),children:s})]})}function ne(){return r.jsxs("div",{className:"absolute mx-auto flex items-center gap-10 text-sm",children:[r.jsx(pt,{isIndeterminate:!0,size:"sm"}),r.jsx(T,{message:"Chart loading"})]})}const qt=m.lazy(()=>xt(()=>import("./lazy-chart-5313f4e9.js"),["./lazy-chart-5313f4e9.js","./main-41809f72.js","./main-f8a48734.css"],import.meta.url));function Ke(e){const{title:a,description:t,className:s,rowSpan:n="row-span-11",colSpan:o="col-span-6",contentRef:i,isLoading:c}=e;return r.jsx(Be,{title:a,description:t,className:D(s,n,o),contentRef:i,children:r.jsxs(m.Suspense,{fallback:r.jsx(ne,{}),children:[r.jsx(qt,{...e}),c&&r.jsx(ne,{})]})})}function Ge(e,{localeCode:a="en",shareFirstDatasetLabels:t=!0}){if(!e)return{datasets:[]};const s=[];return{...e,datasets:e.datasets.map((n,o)=>{const i=n.data.map((c,l)=>{let f;return o===0||!t?(f=Qt(c,e.granularity,a),s[l]=f):f=s[l],{...f,value:c.value}});return{...n,data:i}})}}function Qt(e,a,t){return e.label?{label:e.label}:e.date?Jt(e,a,t):{label:""}}function Jt({date:e,endDate:a},t="day",s){const n=ue(e).toDate(),o=a?ue(a).toDate():null;switch(t){case"minute":return{label:R(s,{second:"2-digit"}).format(n),tooltipTitle:R(s,{day:"2-digit",hour:"numeric",minute:"numeric",second:"2-digit"}).format(n)};case"hour":return{label:R(s,{hour:"numeric",minute:"numeric"}).format(n),tooltipTitle:R(s,{month:"short",day:"2-digit",hour:"numeric",minute:"numeric"}).format(n)};case"day":return{label:R(s,{day:"2-digit",weekday:"short"}).format(n),tooltipTitle:R(s,{day:"2-digit",weekday:"short",month:"short"}).format(n)};case"week":return{label:R(s,{month:"short",day:"2-digit"}).format(n),tooltipTitle:R(s,{day:"2-digit",month:"long",year:"numeric"}).formatRange(n,o)};case"month":return{label:R(s,{month:"short",year:"numeric"}).format(n),tooltipTitle:R(s,{month:"long",year:"numeric"}).format(n)};case"year":return{label:R(s,{year:"numeric"}).format(n),tooltipTitle:R(s,{year:"numeric"}).format(n)}}}const R=bt((e,a)=>new gt(e,a),{equals:(e,a)=>ze(e,a),callTimeout:void 0}),ve=Re().themes[0].values["--be-primary"],H=[[`rgb(${ve.replaceAll(" ",",")})`,`rgba(${ve.replaceAll(" ",",")},0.2)`],["rgb(255,112,67)","rgb(255,112,67,0.2)"],["rgb(255,167,38)","rgb(255,167,38,0.2)"],["rgb(141,110,99)","rgb(141,110,99,0.2)"],["rgb(102,187,106)","rgba(102,187,106,0.2)"],["rgb(92,107,192)","rgb(92,107,192,0.2)"]],Xt={parsing:{xAxisKey:"label",yAxisKey:"value"},datasets:{line:{fill:"origin",tension:.1,pointBorderWidth:4,pointHitRadius:10}},plugins:{tooltip:{intersect:!1,mode:"index"}}};function da({data:e,...a}){const{localeCode:t}=S(),s=m.useMemo(()=>{const n=Ge(e,{localeCode:t});return n.datasets=n.datasets.map((o,i)=>({...o,backgroundColor:H[i][1],borderColor:H[i][0],pointBackgroundColor:H[i][0]})),n},[e,t]);return r.jsx(Ke,{...a,data:s,type:"line",options:Xt})}const ea={parsing:{key:"value"},plugins:{tooltip:{intersect:!0}}};function ua({data:e,className:a,...t}){const{localeCode:s}=S(),n=m.useMemo(()=>{var i;const o=Ge(e,{localeCode:s});return o.labels=(i=o.datasets[0])==null?void 0:i.data.map(c=>c.label),o.datasets=o.datasets.map((c,l)=>({...c,backgroundColor:H.map(f=>f[1]),borderColor:H.map(f=>f[0]),borderWidth:2})),o},[e,s]);return r.jsx(Ke,{type:"polarArea",data:n,options:ea,className:a,...t})}const je="https://www.gstatic.com/charts/loader.js";function ta({placeholderRef:e,data:a,country:t,onCountrySelected:s}){const{trans:n}=yt(),{analytics:o}=Ie(),i=o==null?void 0:o.gchart_api_key,{selectedTheme:c}=vt(),l=m.useRef(),f=!!s&&!t,h=m.useCallback(()=>{var z,k;if(typeof google>"u")return;const p=a.map($=>[$.label,$.value]);p.unshift([n(t?j("City"):j("Country")),n(j("Clicks"))]);const g=`${me(c.values["--be-paper"])}`,v={colorAxis:{colors:[`${me(c.values["--be-primary"])}`]},backgroundColor:g,region:t?t.toUpperCase():void 0,resolution:t?"provinces":"countries",displayMode:t?"markers":"regions",enableRegionInteractivity:f};!l.current&&e.current&&((z=google==null?void 0:google.visualization)!=null&&z.GeoChart)&&(l.current=new google.visualization.GeoChart(e.current)),(k=l.current)==null||k.draw(google.visualization.arrayToDataTable(p),v)},[c,a,e,n,t,f]),d=m.useCallback(async()=>{fe.isLoadingOrLoaded(je)||(await fe.loadAsset(je,{type:"js",id:"google-charts-js"}),await google.charts.load("current",{packages:["geochart"],mapsApiKey:i}),h())},[i,h]);return m.useEffect(()=>(l.current&&s&&google.visualization.events.addListener(l.current,"regionClick",p=>s==null?void 0:s(p.region)),()=>{l.current&&google.visualization.events.removeAllListeners(l.current)}),[s,l.current]),m.useEffect(()=>{d()},[d]),m.useEffect(()=>{h()},[c,h,a]),{drawGoogleChart:h}}const aa=W(r.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackOutlined"),sa=W(r.jsx("path",{d:"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"}),"InfoDialogTrigger");function ra({title:e,body:a,dialogSize:t="sm",className:s}){return r.jsxs(Me,{type:"popover",triggerOnHover:!0,children:[r.jsx(ae,{className:D("ml-4 text-muted opacity-70",s),iconSize:"xs",size:"2xs",children:r.jsx(sa,{viewBox:"0 0 16 16"})}),r.jsxs(Ae,{size:t,children:[e&&r.jsx(jt,{padding:"px-18 pt-12",size:"md",hideDismissButton:!0,children:e}),r.jsx(Fe,{children:a})]})]})}const na=m.memo(({code:e})=>{const{localeCode:a}=S(),t=new Intl.DisplayNames([a],{type:"region"});let s;try{s=t.of(e.toUpperCase())}catch{}return r.jsx(m.Fragment,{children:s})});function fa({data:e,isLoading:a,onCountrySelected:t,country:s,className:n,colSpan:o="col-span-7",rowSpan:i="row-span-11",...c}){const l=m.useRef(null),f=!!t,h=e==null?void 0:e.datasets[0].data,d=m.useMemo(()=>h||[],[h]);return ta({placeholderRef:l,data:d,country:s,onCountrySelected:t}),r.jsxs(Be,{...c,className:D(n,o,i,"compact-scrollbar overflow-x-auto overflow-y-hidden"),title:r.jsxs("div",{className:"flex items-center",children:[r.jsx(T,{message:"Top Locations"}),s?r.jsxs("span",{className:"pl-4",children:["(",r.jsx(na,{code:s}),")"]}):null,f&&r.jsx(oa,{})]}),contentIsFlex:a,children:[a&&r.jsx(ne,{}),r.jsxs("div",{className:"flex gap-24",children:[r.jsx("div",{ref:l,className:"min-h-[340px] w-[480px] flex-auto"}),r.jsxs("div",{className:"w-[170px]",children:[r.jsx("div",{className:"max-h-[340px] w-full flex-initial overflow-y-auto text-sm",children:d.map(p=>r.jsxs("div",{className:D("mb-4 flex items-center gap-4",f&&"cursor-pointer hover:underline"),role:f?"button":void 0,onClick:()=>{t==null||t(p.code)},children:[r.jsx("div",{className:"max-w-110 overflow-hidden overflow-ellipsis whitespace-nowrap",children:p.label}),r.jsxs("div",{children:["(",p.percentage,")%"]})]},p.label))}),s&&r.jsx(Z,{variant:"outline",size:"xs",className:"mt-14",startIcon:r.jsx(aa,{}),onClick:()=>{t==null||t(void 0)},children:r.jsx(T,{message:"Back to countries"})})]})]})]})}function oa(){return r.jsx(ra,{title:r.jsx(T,{message:"Zooming in"}),body:r.jsx(T,{message:"Click on a country inside the map or country list to zoom in and see city data for that country."})})}export{Kt as A,Ke as B,St as C,Bt as D,Oe as F,fa as G,ra as I,da as L,ua as P,la as R,Ut as a,At as b,Rt as c,pe as d,aa as e,Vt as f,Pt as g,Be as h,ne as i,sa as j,Ge as k,H as l,F as t,xe as u};
//# sourceMappingURL=geo-chart-dd0fea1d.js.map
